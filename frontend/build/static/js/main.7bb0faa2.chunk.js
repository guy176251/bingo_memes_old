(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{247:function(e,t,c){},248:function(e,t,c){"use strict";c.r(t);var n=c(18),a=c(9),r=c.n(a),s=c(15),i=c(8),o=c(1),l=c(36),d=c.n(l),j=(c(138),c(51)),u=c(10),b=c(22),h=c(68),O=c(11),x=c(16),m=c(12),p=c(19),f=c(14),g=c(0),v=function(){return Object(g.jsxs)("div",{className:"jumbotron bg-white",children:[Object(g.jsx)("h1",{className:"display-4",children:"Welcome to SITENAME"}),Object(g.jsx)("p",{className:"lead",children:"A place to create and share bingo meme templates"}),Object(g.jsx)("hr",{className:"my-4"}),Object(g.jsxs)("blockquote",{className:"blockquote text-right mt-5",children:[Object(g.jsx)("p",{className:"mb-0",children:"Wow, I've never seen such a revolutionary bingo layout before! My grandparents are going to love this feature!"}),Object(g.jsx)("footer",{className:"blockquote-footer",children:"Totally real person"})]}),Object(g.jsxs)("blockquote",{className:"blockquote text-right mt-5",children:[Object(g.jsx)("p",{className:"mb-0",children:"Man, bingo was boring and clunky before I discovered this website. Now it isn't clunky anymore!"}),Object(g.jsx)("footer",{className:"blockquote-footer",children:"Mentally fading senior citizen"})]}),Object(g.jsxs)("blockquote",{className:"blockquote text-right mt-5",children:[Object(g.jsx)("p",{className:"mb-0",children:"Top text"}),Object(g.jsx)("footer",{className:"blockquote-footer",children:"Bottom text"})]})]})},N=c(77),y=c(7),w=c(132),k=function(e){return e.get("sort")||"hot"},C={new:"-created_at",popular:"-best,-created_at",hot:"-hot,-created_at"},S=function(e,t){return Array(t-e+1).fill(0).map((function(t,c){return c+e}))},T=function(e){var t=e.pageSize,c=e.itemCount,n=e.label,a=e.top,r=void 0!==a&&a,s="w-100 rounded p-2 text-center",i=Math.ceil(c/t),o=Object(x.g)(),l=o.pathname,d=new URLSearchParams(o.search),j=k(d),u=parseInt(d.get("page")||"1");d.delete("page");var b=d.toString(),h=function(e){var t,c=e.index,n=void 0===c?0:c,a=n===u?"bg-sdark-orange text-white":"sdark-fg",r=Object(g.jsx)("div",{className:"".concat(s," ").concat(a," ").concat(n?"page-btn":""),children:n||"..."});if(n&&n!==u){var i=new URLSearchParams(b);i.set("page","".concat(n)),t=Object(g.jsx)(m.b,{to:"".concat(l,"?").concat(i.toString()),children:r})}else t=r;return t},p=Object(g.jsxs)(O.a,{children:[Object(g.jsxs)(O.a.Toggle,{id:"sort-dropdown",className:"sdark-fg border-0 p-0 w-100 ".concat(s),children:["sort: ",j]}),Object(g.jsxs)(O.a.Menu,{className:"w-100 slight-bg",children:[Object(g.jsx)(O.a.ItemText,{children:"Sort by"}),Object(g.jsx)(O.a.Divider,{}),Object.keys(C).map((function(e){return d.set("sort",e),e===j?Object(g.jsx)(O.a.Item,{disabled:!0,children:e}):Object(g.jsx)(O.a.Item,{as:m.b,to:"".concat(l,"?").concat(d.toString()),children:e})}))]})]}),f=function(e){var t=e.rowSize,c=function(e,t){var c;c=t<=7?7:e>4&&e<t-3?2:4;var n={start:Math.round(e-c/2),end:Math.round(e+c/2)};n.start-1!==1&&n.end+1!==t||(n.start+=1,n.end+=1);var a=e>c?S(Math.min(n.start,t-c),Math.min(n.end,t)):S(1,Math.min(t,c+1)),r=function(e,c){return a.length+1!==t?c:[e]};return 1!==a[0]&&(a=r(1,[1,0]).concat(a)),a[a.length-1]<t&&(a=a.concat(r(t,[0,t]))),a}(u,i);return c.length<t&&Array(t-c.length).fill(null).forEach((function(e){return c.push(e)})),c.push(c.slice(-1)[0]),Object(g.jsx)("div",{className:"row row-cols-".concat(t),children:c.map((function(e,c){var n="pr-2",a="",r=t-1;return c>r?a="d-none d-lg-block":c===r&&(a="d-lg-none",n=""),Object(g.jsx)("div",{className:"col p-0 ".concat(a),children:Object(g.jsx)("div",{className:n,children:null!==e&&Object(g.jsx)(h,{index:e})})})}))})};return Object(g.jsxs)("div",{className:"row",children:[r&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"col-12 d-lg-none",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 p-0",children:Object(g.jsx)("div",{className:"pr-1",children:Object(g.jsxs)("div",{className:"sdark-fg ".concat(s),children:[c," ",n]})})}),Object(g.jsx)("div",{className:"pl-1 col-6 p-0",children:p})]})}),Object(g.jsx)("div",{className:"col-12 d-lg-none p-0",children:Object(g.jsx)("hr",{className:"sdark-spacer my-2"})})]}),Object(g.jsx)("div",{className:"col-12 col-lg-6",children:Object(g.jsx)(f,{rowSize:7})}),Object(g.jsx)("div",{className:"d-none d-lg-block col-3"}),Object(g.jsx)("div",{className:"d-none d-lg-block col-3",children:r&&Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-6 p-0",children:Object(g.jsx)("div",{className:"pl-2 pr-1",children:Object(g.jsxs)("div",{className:"sdark-fg ".concat(s),children:[c," ",n]})})}),Object(g.jsx)("div",{className:"pl-1 col-6 p-0",children:p})]})})]})},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=new URLSearchParams(e.search);return c.set("ordering",C[k(c)]),c.delete("sort"),Object.entries(t).forEach((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return c.set(n,a)})),c.toString()},E=function(e){console.log(e)},R=new w.a,A={credentials:"same-origin"},I=function(){return{"X-CSRFToken":R.get("csrftoken")}},D=function(){var e=Object(s.a)(r.a.mark((function e(t){var c,n,a,s=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]&&s[2],E({BACKEND:1,url:t,data:c}),a=Object(y.a)(Object(y.a)({},A),{},{method:"GET"}),Object.keys(c).length>0&&(a=Object(y.a)(Object(y.a)({},a),{},{method:n?"PUT":"POST",headers:Object(y.a)(Object(y.a)({},I()),{},{"Content-Type":"application/json"}),body:JSON.stringify(c)})),e.next=7,L(t,a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t,Object(y.a)(Object(y.a)({},A),{},{method:"DELETE",headers:Object(y.a)({},I())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(r.a.mark((function e(t,c){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api").concat(t),c);case 2:return n=e.sent,a=null,e.prev=4,e.next=7,n.json();case 7:a=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.abrupt("return",{data:a,ok:n.ok});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,c){return e.apply(this,arguments)}}(),B={login:function(e){return D("/login/",e)},logout:function(){return D("/logout/")},editCard:function(e,t){return D("/cards/".concat(e,"/"),t,!0)},deleteCard:function(e){return F("/cards/".concat(e,"/"))},createUser:function(e){return D("/signup/",e)},createVote:function(e){return D("/votes/",e)},createCard:function(e){return D("/cards/",e)},getSession:function(){return D("/session/")},getCard:function(e){return D("/cards/".concat(e,"/"))},getUser:function(e){return D("/users/".concat(e,"/"))},getCategory:function(e){return D("/categories/".concat(e,"/"))},getCardList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D("/cards/?".concat(q(e,t)))},getTopThreeCards:function(e){return D("/bar/cards/?search=".concat(e))},getTopThreeCategories:function(e){return D("/bar/categories/?search=".concat(e))}},M=function(e){var t=e.card,c=e.children;return Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"w-100",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-2 d-none d-lg-block"}),Object(g.jsx)("div",{className:"col-12 col-lg-8",children:Object(g.jsx)("div",{children:t?Object(g.jsx)("div",{className:"py-4 text-center rounded sdark-fg m-2",children:c}):c})}),Object(g.jsx)("div",{className:"col-2 d-none d-lg-block"})]})})})},P=function(e,t){switch(e){case 0:return"pb-".concat(U);case t:return"pt-".concat(U);default:return"py-".concat(U)}},U=1,V="rounded text-center sdark-fg p-3 w-100",H="h-100 d-flex align-items-center justify-content-center",_=function(e){var t=e.subject,c=e.info;return Object(g.jsxs)(M,{children:[Object(g.jsx)("div",{className:"p-2",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-8 pr-".concat(U),children:Object(g.jsx)("div",{className:"".concat(H," ").concat(V),children:Object(g.jsx)("h3",{children:t})})}),Object(g.jsx)("div",{className:"col-4 pl-".concat(U),children:Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"col",children:c.map((function(e,t){return Object(g.jsx)("div",{className:"row ".concat(P(t,c.length-1)),children:Object(g.jsx)("div",{className:"".concat(V," w-100"),children:e})})}))})})})]})}),Object(g.jsxs)("div",{className:"pt-2 px-2 d-none",children:[Object(g.jsx)("div",{className:"row",children:Object(g.jsx)("div",{className:"col pb-".concat(U),children:Object(g.jsx)("div",{className:V,children:Object(g.jsx)("div",{className:"p-2",children:Object(g.jsx)("h2",{children:t})})})})}),Object(g.jsx)("div",{className:"row row-cols-2",children:c.map((function(e,t){return Object(g.jsx)("div",{className:"col py-".concat(U," ").concat(t%2===0?"pr":"pl","-").concat(U),children:Object(g.jsx)("div",{className:"".concat(H," ").concat(V),children:e})})}))})]})]})},z=function(){var e={"pt-1":[1,2,3,4,5],"pr-1":[5,10,15,20,25],"pl-1":[1,6,11,16,21],"pb-1":[21,22,23,24,25]};return Array(25).fill(0).map((function(t,c){c++;var n=["pt-1","pb-1","pl-1","pr-1"];return Object.entries(e).forEach((function(e){var t=Object(i.a)(e,2),a=t[0];if(t[1].includes(c)){var r=n.indexOf(a);n.splice(r,1)}})),n.join(" ")}))}(),Y=function(e){return new Date(Date.parse(e)).toLocaleString()},G=c(23),Q=c(34),W=Object(o.createContext)(null),K=6e4,J=36e5,X=24*J,$=31*X,Z={year:321408e5,month:$,day:X,hour:J,minute:K},ee=function(e){var t=new Date(Date.now()),c=new Date(Date.parse(e)),n=t.getTime()-c.getTime();for(var a in Z){var r=Z[a];if(n>=r){var s=Math.floor(n/r),i=(s=r===K?s%60:s)>1?"s":"";return"".concat(s," ").concat(a).concat(i," ago")}}return"just now"},te=function(){var e=Object(s.a)(r.a.mark((function e(t,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.createVote({card:{id:t.id},up:c});case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ce=function(e){var t=e.card,c=Object(o.useContext)(W),n="sdark-fg",a="sdark-orange",r="sdark-violet",s=!1,l=!1,d=0,j="text-".concat(n);null!==t.upvoted&&(d=t.upvoted?-1:1,t.upvoted?(s=!0,j="text-".concat(a)):(l=!0,j="text-".concat(r)));var b=d,h=Object(o.useState)(s),O=Object(i.a)(h,2),x=O[0],m=O[1],p=Object(o.useState)(l),v=Object(i.a)(p,2),N=v[0],y=v[1],w=Object(o.useState)(j),k=Object(i.a)(w,2),C=k[0],S=k[1],T=function(e,t,c){m(!1),y(!1),c(!t),S("text-"+(t?n:e))},q=x?a:n,E=N?r:n,R=0;x&&!N?R=1:N&&!x&&(R=-1),R+=b;var A=Boolean(c);return Object(g.jsxs)(u.a,{xs:2,className:"border-sdark-right text-center",children:[Object(g.jsx)(ne,{icon:f.b,color:q,loggedIn:A,voteAction:function(){T(a,x,m),te(t,!0)},user:c}),Object(g.jsx)("div",{className:"my-1 ".concat(C),children:Object(g.jsx)("h5",{children:t.score+R})}),Object(g.jsx)(ne,{icon:f.a,color:E,loggedIn:A,voteAction:function(){T(r,N,y),te(t,!1)},user:c})]})},ne=function(e){var t=e.icon,c=e.color,n=e.loggedIn,a=e.voteAction,r=e.user;return Object(g.jsx)("div",{className:"text-".concat(c," ").concat(r?"vote-btn":""," p-1 rounded"),onClick:n?a:function(){},style:n?{cursor:"pointer"}:{},children:Object(g.jsx)(p.a,{icon:t})})},ae=function(e){var t=e.card,c=e.link,n=Object(x.f)(),a=Object(o.useState)(!1),l=Object(i.a)(a,2),d=l[0],j=l[1],b=Object(o.useContext)(W),h=function(){return j(!d)},O=Object(g.jsx)(m.b,{to:"/users/".concat(t.author.id,"/"),children:t.author.name}),v=Object(g.jsx)(m.b,{to:"/categories/".concat(t.category.name,"/"),children:t.category.name}),N="/cards/".concat(t.id,"/"),w=function(){return c?Object(g.jsx)(m.b,{to:N,children:Object(g.jsx)("h5",{children:t.name})}):Object(g.jsx)("h5",{children:t.name})},k=function(){return Object(g.jsxs)(u.a,{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("p",{className:"text-sdark-fg",children:["submitted ",ee(t.created_at)," by ",O," to ",v]})]})},C=function(){return Object(g.jsx)(g.Fragment,{children:b&&t.author.id===b.id&&Object(g.jsxs)(u.a,{xs:1,className:"border-sdark-left text-center",children:[Object(g.jsx)(G.a,{className:"d-flex justify-content-center align-items-center h-50",children:Object(g.jsx)(m.b,{to:"/cards/".concat(t.id,"/edit/"),children:Object(g.jsx)("div",{className:"text-sdark-red",children:Object(g.jsx)(p.a,{icon:f.d})})})}),Object(g.jsx)(G.a,{className:"d-flex justify-content-center align-items-center h-50",children:Object(g.jsx)("div",{className:"text-sdark-red",style:{cursor:"pointer"},onClick:h,children:Object(g.jsx)(p.a,{icon:f.n})})})]})})},S=function(){return Object(g.jsxs)(Q.a,{show:d,dialogAs:function(e){return Object(g.jsx)(Q.a.Dialog,{centered:!0,children:Object(g.jsx)("div",Object(y.a)(Object(y.a)({},e),{},{className:"modal-content rounded slight-bg"}))})},children:[Object(g.jsx)(Q.a.Header,{closeButton:!0,children:"Delete Bingo Card"}),Object(g.jsxs)(Q.a.Body,{children:['Are you sure you want to delete bingo card "',t.name,'"?']}),Object(g.jsxs)(Q.a.Footer,{children:[Object(g.jsx)("button",{className:"btn btn-danger",onClick:Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.deleteCard(t.id);case 2:n.go(0);case 3:case"end":return e.stop()}}),e)}))),children:"Yes"}),Object(g.jsx)("button",{className:"btn btn-primary",onClick:h,children:"No"})]})]})};return Object(g.jsx)("div",{className:"p-3 rounded sdark-fg",children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(ce,{card:t}),Object(g.jsx)(k,{}),Object(g.jsx)(C,{}),Object(g.jsx)(S,{})]})})},re=c(84),se=function(e){var t=e.message;return Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)(re.a,{animation:"border",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(g.jsx)("div",{className:"mt-2",children:"string"===typeof t?Object(g.jsx)("h4",{children:t}):t})]})},ie=function(e,t){switch(t.type){case"failed":return Object(y.a)(Object(y.a)({},e),{},{done:!0,ok:!1});case"loading":return Object(y.a)(Object(y.a)({},e),{},{done:!1,ok:!0});case"success":return Object(y.a)(Object(y.a)({},t.payload),{},{done:!0,ok:!0})}},oe=function(e){var t=e.apiCall,c=e.cardQuery,n=e.header,a=Object(x.g)(),l=Object(o.useReducer)(ie,{done:!1,ok:!0}),d=Object(i.a)(l,2),j=d[0],u=j.done,b=j.ok,h=j.itemData,O=j.cardData,m=d[1];Object(o.useEffect)((function(){Object(s.a)(r.a.mark((function e(){var n,s,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"loading"}),e.next=3,t();case 3:if(n=e.sent,s=n.data,n.ok){e.next=9;break}return m({type:"failed"}),e.abrupt("return");case 9:return e.next=11,B.getCardList(a,c);case 11:if(i=e.sent,o=i.data,i.ok){e.next=17;break}return m({type:"failed"}),e.abrupt("return");case 17:m({type:"success",payload:{itemData:s,cardData:o}});case 18:case"end":return e.stop()}}),e)})))()}),[]);var p=n,f=function(e){var t=e.item,c=e.cards,n=function(e){var t=e.top;return Object(g.jsx)("div",{className:"p-2",children:Object(g.jsx)(T,{itemCount:c.count,pageSize:c.page_size,label:"cards",top:t})})};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p,{data:t}),Object(g.jsx)(n,{top:!0}),Object(g.jsx)("div",{className:"row row-cols-1 row-cols-lg-2",children:c.results.map((function(e){return Object(g.jsx)("div",{className:"col p-2",children:Object(g.jsx)(ae,{card:e,link:!0})})}))}),Object(g.jsx)(n,{})]})};return u?b&&h&&O?Object(g.jsx)(f,{item:h,cards:O}):Object(g.jsx)(g.Fragment,{children:" Something went wrong..."}):Object(g.jsx)(se,{message:"Getting bingo cards..."})},le=function(e){var t=e.data;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(N.a,{children:[Object(g.jsx)("title",{children:t.name}),Object(g.jsx)("meta",{name:"description",content:"Category: ".concat(t.name)})]}),Object(g.jsx)(_,{subject:"category: ".concat(t.name),info:[Object(g.jsxs)(g.Fragment,{children:["author: ",Object(g.jsx)(m.b,{to:"/users/".concat(t.author.id,"/"),children:t.author.name})]}),"created at ".concat(Y(t.created_at))]})]})},de=function(){var e=Object(x.h)().categoryName;return Object(g.jsx)(oe,{apiCall:function(){return B.getCategory(e)},cardQuery:{category:e},header:le},"".concat(Date.now()))},je=function(e){var t=e.apiCall,c=e.loadingMessage,n=e.component,a=Object(o.useState)({data:null,ok:!0}),l=Object(i.a)(a,2),d=l[0],j=d.data,u=d.ok,b=l[1];Object(o.useEffect)((function(){Object(s.a)(r.a.mark((function e(){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E({APIRENDER:"getting data",data:j,ok:u}),e.next=3,t();case 3:c=e.sent,b(c);case 5:case"end":return e.stop()}}),e)})))()}),[]);var h=function(){return(null===j||void 0===j?void 0:j.detail)||!u?Object(g.jsx)("div",{className:"text-sdark-red text-center my-4",children:Object(g.jsx)("h3",{children:"Error"+((null===j||void 0===j?void 0:j.detail)?": ".concat(j.detail):"")})}):Object(g.jsxs)("div",{className:"text-center mt-4",children:[Object(g.jsx)(re.a,{animation:"border",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})}),c&&Object(g.jsx)("div",{className:"mt-2",children:c})]})},O=n,x=function(){return j&&!j.detail&&u?Object(g.jsx)(O,{data:j}):Object(g.jsx)(h,{})};return Object(g.jsx)(x,{})},ue=function(e){var t=e.data,c=function(e){var c=e.header;return Object(g.jsx)("div",{className:"p-2",children:Object(g.jsx)(T,{itemCount:t.count,pageSize:t.page_size,label:"cards",top:c})})};return 0===t.count?Object(g.jsx)(M,{card:!0,children:Object(g.jsx)("h3",{children:"No results found."})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(c,{header:!0}),Object(g.jsx)("div",{className:"row row-cols-1 row-cols-lg-2",children:t.results.map((function(e){return Object(g.jsx)("div",{className:"col p-2",children:Object(g.jsx)(ae,{card:e,link:!0})})}))}),Object(g.jsx)(c,{})]})},be=function(e){var t=e.query,c=e.key,n=Object(x.g)();return Object(g.jsx)(je,{apiCall:function(){return B.getCardList(n,t)},component:ue},c)},he=function(e){var t=e.data;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(N.a,{children:Object(g.jsxs)("title",{children:["Profile for ",t.name]})}),Object(g.jsx)(_,{subject:"user: ".concat(t.name),info:["score: ".concat(t.score),"created at ".concat(Y(t.created_at))]}),Object(g.jsx)(be,{query:{user:t.id}},"".concat(t.id))]})},Oe=function(){var e=Object(x.h)().userId;return Object(g.jsx)(je,{apiCall:function(){return B.getUser(e)},component:he},e)},xe=c(67),me=c(131),pe=c(99),fe=function(e){return window.scrollTo({top:e,behavior:"smooth"})},ge=function(){return fe(0)},ve=function(){return fe(document.body.scrollHeight)},Ne=function(e){var t=e.spacer,c=e.buttons,a=function(e,c,n){return Object(g.jsx)(b.a.Item,{onClick:n,children:Object(g.jsxs)(b.a.Link,{children:[Object(g.jsx)(p.a,{className:t?"text-sdark-spacer":"text-sdark-fg",icon:e}),Object(g.jsx)("br",{}),Object(g.jsx)("small",{className:t?"text-sdark-spacer":"text-sdark-fg",children:c})]})})};return Object(g.jsx)(h.a,{fixed:t?void 0:"bottom",className:t?"sdark-spacer py-0":"sdark-fg shadow py-1",children:Object(g.jsx)(j.a,{children:Object(g.jsxs)(b.a,{fill:!0,className:"w-100",children:[t?a(f.j,"Bottom of page"):[a(f.f,"Bottom",ve),a(f.g,"Top",ge)],(null===c||void 0===c?void 0:c.length)&&c.map((function(e){return a.apply(void 0,Object(n.a)(e))}))]})})})},ye=function(e){return Object(g.jsxs)("div",{id:"navbars",className:"d-md-none",children:[Object(g.jsx)(Ne,{spacer:!0}),Object(g.jsx)(Ne,Object(y.a)({},e))]})},we=function(){var e=Array(5).fill(0).map((function(e,t){return t})),t=e.map((function(e){return Array(5).fill(0).map((function(t,c){return 5*c+e}))})),c=e.map((function(e){return Array(5).fill(0).map((function(t,c){return c+5*e}))})),a=Array(5).fill(0).map((function(e,t){return 4*t+4})),r=Array(5).fill(0).map((function(e,t){return 6*t}));return[].concat(Object(n.a)(t),Object(n.a)(c),[a,r])}(),ke=function(e,t,c,n){if(!navigator.maxTouchPoints){var a=c.tiles,r=a.indexOf(e);a[r].hovered=t,n(Object(y.a)(Object(y.a)({},c),{},{tiles:a}))}},Ce=function(e,t,c,n){var a=t.tiles,r=a.indexOf(e);a[r].clicked=!a[r].clicked,c(Object(y.a)(Object(y.a)({},t),{},{tiles:a}));var s=function(e){if(we.some((function(t){return t.every((function(t){return e.tiles[t].clicked}))})))return we.filter((function(t){return t.every((function(t){return e.tiles[t].clicked}))}))[0].map((function(t){return e.tiles[t]}))}(t);s&&n(s)},Se=function(e){return e.clicked?Te:e.hovered?qe:"sdark-fg"},Te="bg-sdark-green text-white",qe="bg-sdark-magenta text-white",Ee=function(e){var t=e.passedCard,c=e.cardInfo,n=Object(o.useState)((function(){var e=Object.entries(t).filter((function(e){var t=Object(i.a)(e,2),c=t[0];t[1];return c.startsWith("tile_")})),c=e.map((function(e,t){var c=Object(i.a)(e,2);c[0];return{text:c[1],hovered:!1,clicked:!1,id:t+1}}));return e.forEach((function(e){var c=Object(i.a)(e,2),n=c[0];c[1];return Reflect.deleteProperty(t,n)})),c[12].clicked=!0,t.tiles=c,console.log("init card"),t})),a=Object(i.a)(n,2),r=a[0],s=a[1],l=Object(o.useState)(""),d=Object(i.a)(l,2),j=d[0],b=d[1],h=Object(o.useState)([]),O=Object(i.a)(h,2),x=O[0],m=O[1],v=Object(o.useState)(!0),N=Object(i.a)(v,2),w=N[0],k=N[1],C=Object(o.useRef)(null),S=Boolean(x.length),T=function(){window.scrollTo({top:0,behavior:"smooth"}),k(!1),C.current&&C.current.focus()},q=[[f.k,"Search",T]];w||q.push([f.e,"Expand",function(){return k(!0)}]);var E=r.tiles.filter((function(e){return e.text.toLowerCase().includes(j.toLowerCase())}));return console.log("\nLAYOUT:\n\n    card: ".concat(r.name,"\n    query: ").concat(j,"\n    solution: ").concat(x,"\n    topToggled: ").concat(w,"\n")),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(G.a,{className:"pt-2",children:[Object(g.jsxs)(u.a,{id:"info-and-indicators",xs:12,md:6,lg:5,className:"px-2",children:[Object(g.jsxs)("div",{id:"card-info",className:"pb-2 "+(w?"":"d-none d-md-block"),children:[Object(g.jsx)("div",{className:"mb-2",children:c}),Object(g.jsx)(u.a,{id:"indicators",className:"text-center",children:Object(g.jsx)(G.a,{className:"row-cols-5",children:r.tiles.map((function(e,t){return Object(g.jsx)(u.a,{className:"p-0 ".concat(z[t]),children:Object(g.jsx)(u.a,{className:"py-2 rounded ".concat(Se(e)),children:e.id})})}))})})]}),Object(g.jsxs)("div",{id:"search-bar",className:"pb-2",children:[!w&&Object(g.jsx)("div",{className:"d-md-none text-sdark-bg p-0 pb-1",children:Object(g.jsx)("small",{children:"Card info hidden. Click on the expand button to show them."})}),Object(g.jsxs)(pe.a,{children:[Object(g.jsx)(me.a.Control,{placeholder:"Search bingo tiles",type:"string",className:"slight-bg",value:j,style:{cursor:"pointer"},onChange:function(e){return b(e.target.value)},onFocus:T,ref:C}),j&&Object(g.jsx)(pe.a.Append,{children:Object(g.jsx)(xe.a,{variant:"danger",className:"bg-sdark-red",onClick:function(){b(""),k(!0)},children:Object(g.jsx)(p.a,{icon:f.m})})})]})]})]}),Object(g.jsxs)(u.a,{id:"tiles",xs:12,md:6,lg:7,className:"px-2",children:[j&&Object(g.jsx)("div",{className:"text-sdark-bg text-center p-0 "+(E.length?"pb-3":""),children:E.length?"".concat(E.length," result")+(E.length>1?"s":""):"No results"}),Object(g.jsx)(G.a,{className:"row-cols-1 row-cols-md-1",children:E.map((function(e,t){return Object(g.jsx)(u.a,{className:0===t?"pb-1":"py-1",children:Object(g.jsx)(u.a,{style:{cursor:"pointer"},className:"rounded h-100 py-2 ".concat(Se(e)),onClick:function(){return Ce(e,r,s,m)},onMouseEnter:function(){return ke(e,!0,r,s)},onMouseLeave:function(){return ke(e,!1,r,s)},children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(u.a,{xs:2,lg:1,className:"border"+(e.hovered||e.clicked?"":"-sdark")+"-right text-center",children:e.id}),Object(g.jsx)(u.a,{children:e.text})]})})})}))}),Object(g.jsx)("hr",{className:"sdark-hr"})]}),Object(g.jsxs)(Q.a,{show:S,dialogAs:function(e){return Object(g.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(g.jsx)("div",Object(y.a)({},Object(y.a)(Object(y.a)({},e),{},{className:"modal-content rounded sdark-bg"})))})},children:[Object(g.jsx)(Q.a.Header,{children:"You got Bingo!"}),Object(g.jsxs)(Q.a.Body,{children:[Object(g.jsx)("div",{className:"text-center mb-4 mt-3",children:Object(g.jsx)("h3",{children:r.name})}),Object(g.jsx)(G.a,{className:"row-cols-1 p-1",children:x.map((function(e){return Object(g.jsx)(u.a,{className:"p-1",children:Object(g.jsx)(u.a,{className:"rounded h-100 p-2 sdark-fg",children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(u.a,{xs:2,md:1,className:"border-sdark-right text-center",children:e.id}),Object(g.jsx)(u.a,{children:e.text})]})})})}))}),Object(g.jsxs)("div",{className:"text-center mt-4 mb-3",children:["Link: ",Object(g.jsx)("a",{href:window.location.href,className:"sdark-bg",children:window.location.href})]})]}),Object(g.jsx)(Q.a.Footer,{children:Object(g.jsx)(xe.a,{variant:"primary",onClick:function(){return function(e,t,c){if(e){var n=e.tiles.map((function(e){return e.hovered=!1,e.clicked=!1,e}));n[12].clicked=!0,t(Object(y.a)(Object(y.a)({},e),{},{tiles:n})),c([]),window.scrollTo({top:0,behavior:"smooth"})}}(r,s,m)},children:"Start Over"})})]})]}),Object(g.jsx)(ye,{id:"card-navbar",buttons:q})]})},Re=function(){var e=Object(x.h)().cardId;return Object(g.jsx)(je,{apiCall:function(){return B.getCard(e)},loadingMessage:"Loading bingo card ".concat(e),component:function(e){var t=e.data;return Object(g.jsx)(Ee,{passedCard:t,cardInfo:Object(g.jsx)(ae,{card:t})})}},e)},Ae=c(33),Ie=c(24),De=function(){return Ae.c().default("").required("Required")},Fe=Ae.a().shape({username:De(),password:De()}),Le=function(e){var t=e.login,c=e.logout,n=e.user,a=Object(o.useState)({valid:!1,done:!1,ok:!0}),l=Object(i.a)(a,2),d=l[0],j=d.done,u=d.valid,b=d.ok,h=l[1],O=function(){var e=Object(s.a)(r.a.mark((function e(c){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h({done:!1,valid:u,ok:b}),e.next=3,B.login(c);case 3:n=e.sent,a=!1,n.data&&(a=n.data.valid,n.data.user&&t(n.data.user)),h({done:!0,valid:a,ok:n.ok});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.next=3,B.logout();case 3:e.sent.ok&&c(),t(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(r.a.mark((function e(t,c){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.resetForm,e.next=3,O(t);case 3:return n(),e.abrupt("return");case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),f=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("h1",{children:"Login"}),j&&!b&&!1===u&&Object(g.jsx)("div",{className:"text-danger mt-4",children:"Invalid credentials"})]}),Object(g.jsx)("div",{className:"mt-4",children:Object(g.jsxs)(Ie.c,{children:[Object(g.jsx)("div",{className:"form-row",children:Object(g.jsxs)("div",{className:"form-group col",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("label",{children:"Username"})}),Object(g.jsx)("div",{className:"col w-100 text-right",children:Object(g.jsx)(Ie.a,{name:"username",component:"label",className:"text-danger"})})]}),Object(g.jsx)(Ie.b,{name:"username",className:"form-control"})]})}),Object(g.jsx)("div",{className:"form-row",children:Object(g.jsxs)("div",{className:"form-group col",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("label",{children:"Password"})}),Object(g.jsx)("div",{className:"col w-100 text-right",children:Object(g.jsx)(Ie.a,{name:"password",component:"label",className:"text-danger"})})]}),Object(g.jsx)(Ie.b,{name:"password",type:"password",className:"form-control"})]})}),Object(g.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Login"}),Object(g.jsx)(m.b,{to:"/signup/",children:Object(g.jsx)("button",{className:"btn btn-warning ml-2",children:"Signup"})})]})})]})};return Object(g.jsx)(Ie.d,{validationSchema:Fe,initialValues:Fe.default(""),onSubmit:p,children:function(e){var t=e.isSubmitting,c=e.setSubmitting;return t?Object(g.jsx)(se,{message:"Logging "+(n?"out":"in")+"..."}):n?Object(g.jsx)(M,{card:!0,children:Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsxs)("h1",{children:["Logged in as ",n.name,"!"]}),Object(g.jsx)("button",{className:"btn btn-primary",onClick:function(){return x(c)},children:"Logout"})]})}):Object(g.jsx)(f,{})}})},Be=function(e){var t=e.user,c=e.login,n=e.logout;return Object(g.jsx)("div",{className:"py-4",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-3 d-none d-lg-block"}),Object(g.jsx)("div",{className:"col-12 col-lg-6",children:Object(g.jsx)(Le,{login:c,logout:n,user:t})}),Object(g.jsx)("div",{className:"col-3 d-none d-lg-block"})]})})},Me=function(){return Object(g.jsx)("div",{className:"py-4",children:Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col-3 d-none d-lg-block"}),Object(g.jsx)("div",{className:"col-12 col-lg-6",children:Object(g.jsx)(He,{})}),Object(g.jsx)("div",{className:"col-3 d-none d-lg-block"})]})})},Pe=function(){return Ae.c().default("").required("Required")},Ue=Ae.a().shape({username:Pe().min(2,"Too Short!").max(50,"Too Long!"),password:Pe().min(10,"Too Short!"),confirmPassword:Pe().when("password",{is:function(e){return!!(e&&e.length>0)},then:Ae.c().oneOf([Ae.b("password")],"Needs to match password")}),email:Pe().email("Invalid email")}),Ve=[["Username","username","text"],["Email","email","email"],["Password","password","password"],["Confirm Password","confirmPassword","password"]],He=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),c=t[0],n=t[1],a=Object(o.useState)(!1),l=Object(i.a)(a,2),d=l[0],j=l[1],u=function(){var e=Object(s.a)(r.a.mark((function e(t,c){var a,s,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.resetForm,s=c.setErrors,j(!1),e.next=4,B.createUser({username:t.username,password:t.password,email:t.email});case 4:return(o=e.sent).data&&!o.ok?(l=o.data,s(Object.fromEntries(Object.entries(l).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1][0]]}))))):o.ok&&(a(),n(!0)),j(!0),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),b=function(e){var t=e.isSubmitting;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"text-center",children:Object(g.jsx)("h1",{children:"Signup"})}),!c&&d?Object(g.jsxs)("div",{className:"text-danger text-center",children:[Object(g.jsx)("h1",{children:"Whoops!"}),Object(g.jsx)("p",{children:"There was something wrong, please submit again."})]}):null,Object(g.jsx)("div",{className:"mt-4",children:Object(g.jsxs)(Ie.c,{children:[Ve.map((function(e){var t=Object(i.a)(e,3),c=t[0],n=t[1],a=t[2];return Object(g.jsx)("div",{className:"form-row",children:Object(g.jsxs)("div",{className:"form-group col",children:[Object(g.jsxs)("div",{className:"row",children:[Object(g.jsx)("div",{className:"col",children:Object(g.jsx)("label",{children:c})}),Object(g.jsx)("div",{className:"col w-100 text-right",children:Object(g.jsx)(Ie.a,{name:n,component:"label",className:"text-danger"})})]}),Object(g.jsx)(Ie.b,{name:n,type:a,className:"form-control"})]})})})),Object(g.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:t,children:"Signup"}),Object(g.jsx)(m.b,{to:"/login/",children:Object(g.jsx)("button",{className:"btn btn-warning ml-2",children:"Back to Login"})})]})})]})},h=function(){return Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("div",{className:"mb-2",children:Object(g.jsx)("h1",{children:"Account creation successful!"})}),Object(g.jsx)(m.b,{to:"/login/",children:Object(g.jsx)("button",{className:"btn btn-warning ml-2",children:"Back to Login"})})]})};return Object(g.jsx)(Ie.d,{validateOnBlur:!0,validateOnChange:!1,validationSchema:Ue,initialValues:Ue.getDefault(),onSubmit:u,children:function(e){var t=e.isSubmitting;return t?Object(g.jsx)(se,{message:"Creating new account..."}):c?Object(g.jsx)(h,{}):Object(g.jsx)(b,{isSubmitting:t})}})},_e=function(){var e=new URLSearchParams(Object(x.g)().search).get("q")||"",t={search:encodeURIComponent(e)};return E({SEARCHVIEW:1,searchQuery:e}),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(M,{card:!0,children:Object(g.jsxs)("h3",{children:['Search results for "',e,'"']})}),Object(g.jsx)(be,{query:t},e)]})},ze=function(e){console.log(e)},Ye=Array(25).fill(null).map((function(e,t){return"tile_".concat(t+1)})),Ge=[].concat(Object(n.a)(Ye),["name","category"]),Qe=function(e){return Ae.c().default("").required("Cannot be blank.").max(e,"Cannot be longer than ".concat(e," characters."))},We=Qe(20).matches(/^\w+$/,{message:"Can only contain letters, numbers and underscores.",excludeEmptyString:!0}),Ke=Object.fromEntries([].concat(Ye.map((function(e){return[e,Qe(200)]})),Object.entries({name:Qe(50),category:We}))),Je=Ae.a().shape(Ke),Xe=function(e){var t=e.name,c=e.label;return Object(g.jsx)(Ie.b,{name:t,children:function(e){var t=e.meta;return t.touched?Object(g.jsx)("div",{className:"rounded text-center py-2 text-white bg-sdark-".concat(t.error?"red":"green"),children:c}):Object(g.jsx)("div",{className:"rounded text-center py-2 sdark-fg",children:c})}})},$e=Object(o.forwardRef)((function(e,t){var c=e.children;return Object(g.jsx)("div",{ref:t,children:c})})),Ze=Object(o.createContext)({setFieldValue:function(){},values:{}}),et=function(e){var t=e.card,c=Object(o.useContext)(Ze),n=c.setFieldValue,a=c.values.category,l={query:a,showDropdown:!1,loading:!1,disabled:Boolean(a.length>0),errors:[],categories:[]},d=Object(o.useReducer)((function(e,t){switch(ze({CATEGORYSEARCHBAR:"reducer",state:e,action:t}),t.type){case"query":return setTimeout((function(){ze({CATEGORYSEARCHBAR:"input check",query:m,queryRef:T}),m&&m===T.current&&(ze("searching for categories..."),q())}),500),Object(y.a)(Object(y.a)({},e),{},{query:t.payload,showDropdown:!1,disabled:!!e.disabled&&t.payload.length>0,errors:t.payload.length>0?e.errors:[]});case"dropdown":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:t.payload});case"category":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:!0,loading:!1,categories:t.payload});case"menuSelect":var c=t.payload.errors.length>0?"":t.payload.query;return n("category",c),Object(y.a)(Object(y.a)({},e),{},{disabled:Boolean(t.payload.query.length>0),query:t.payload.query,errors:t.payload.errors});case"load":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:!t.payload,loading:t.payload})}}),l),j=Object(i.a)(d,2),b=j[0],h=b.disabled,x=b.errors,m=b.query,v=b.showDropdown,N=b.loading,w=b.categories,k=j[1],C=0===x.length,S=h&&C,T=Object(o.useRef)(m);T.current=m,ze({CATEGORYSEARCHBAR:"states",query:m,disabled:h,errors:x,categoryName:a});var q=function(){var e=Object(s.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({type:"load",payload:!0}),e.next=3,B.getTopThreeCategories(m);case 3:t=e.sent,c=t.data,t.ok&&c?(ze(c),k({type:"category",payload:c})):k({type:"load",payload:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){return Object(g.jsx)(g.Fragment,{children:N&&Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("div",{className:"pl-2",children:Object(g.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})})})})})})},R=function(){return Object(g.jsx)(g.Fragment,{children:!S&&m.length>0&&Object(g.jsx)("div",{className:"input-group-append",style:{cursor:"pointer"},onClick:function(){return k({type:"query",payload:""})},children:Object(g.jsx)("span",{className:"input-group-text clear",children:Object(g.jsx)(p.a,{icon:f.m})})})})},A=function(){return Object(g.jsx)(g.Fragment,{children:S&&Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text clear p-1",children:Object(g.jsx)("div",{className:"p-2 rounded text-white bg-sdark-violet align-items-center justify-content-center",children:Object(g.jsxs)(G.a,{children:[Object(g.jsx)(u.a,{className:t?"":"pr-2",children:m}),!t&&Object(g.jsx)(u.a,{className:"pl-2",children:Object(g.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return k({type:"menuSelect",payload:{query:"",errors:[]}})},children:Object(g.jsx)("small",{children:Object(g.jsx)(p.a,{icon:f.m})})})})]})})})})})},I=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a.Item,{className:"slight-bg",disabled:!0,children:"Select one"}),Object(g.jsx)(O.a.Divider,{className:"border-slight-top"}),w.length>0?w.map((function(e){return Object(g.jsx)(O.a.Item,{className:"slight-bg",eventKey:e.name,children:e.name})})):Object(g.jsxs)(O.a.Item,{className:"slight-bg",eventKey:"QUERY!",children:["Create new category: ",m]})]})},D=function(){return Object(g.jsx)(g.Fragment,{children:x.length>0&&m.length>0&&x.map((function(e){return Object(g.jsx)("div",{className:"text-sdark-red",children:Object(g.jsx)("small",{children:e})})}))})},F=function(){return Object(g.jsx)("div",{className:"input-group-prepend",children:Object(g.jsx)("span",{className:"input-group-text ".concat(h?C?"success":"error":""),children:"Category"})})};return Object(g.jsxs)(O.a,{show:v,onToggle:function(){return k({type:"dropdown",payload:!v})},onSelect:function(e){var t=[];switch(e){case null:break;case"QUERY!":try{We.validateSync(m)}catch(c){t=c.errors}k({type:"menuSelect",payload:{query:m,errors:t}});break;default:k({type:"menuSelect",payload:{query:e,errors:t}})}},children:[Object(g.jsxs)("div",{className:"input-group slight-bg rounded",children:[Object(g.jsx)(F,{}),Object(g.jsx)(A,{}),Object(g.jsx)("input",{disabled:S,type:"text",className:"form-control",placeholder:S?"":"Search",value:S?"":m,onChange:function(e){return k({type:"query",payload:e.target.value})}}),Object(g.jsx)(R,{}),Object(g.jsx)(E,{})]}),Object(g.jsx)("div",{children:Object(g.jsx)(D,{})}),Object(g.jsx)(O.a.Toggle,{as:$e,id:"create-category"}),Object(g.jsx)(O.a.Menu,{className:"w-100 slight-bg mt-1 px-2",children:Object(g.jsx)(I,{})})]})},tt=function(e){var t=e.name,c=e.label;return Object(g.jsx)(Ie.b,{name:t,children:function(e){var t=e.field,n=e.meta;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{className:"input-group",children:[Object(g.jsx)("div",{className:"input-group-prepend",children:Object(g.jsx)("span",{className:"input-group-text ".concat(n.touched?n.error?"error":"success":""),children:c})}),Object(g.jsx)("input",Object(y.a)({type:"text",className:"form-control",placeholder:"Empty"},t))]}),n.touched&&n.error&&Object(g.jsx)("div",{className:"text-sdark-red",children:Object(g.jsx)("small",{children:n.error})})]})}})},ct=function(e){"Enter"===e.key&&e.preventDefault()},nt=function(e){var t=e.isSubmitting,c=e.card;return Object(g.jsxs)(Ie.c,{onKeyDown:ct,children:[Object(g.jsx)(M,{card:!0,children:Object(g.jsx)("h2",{children:c?'Editing "'.concat(c.name,'"'):"Create New Card"})}),Object(g.jsxs)(G.a,{children:[Object(g.jsx)(u.a,{xs:12,lg:5,children:Object(g.jsxs)("div",{className:"p-2",children:[Object(g.jsxs)(u.a,{className:"pb-2 px-0",children:[Object(g.jsx)(G.a,{className:"pb-2 px-0",children:Object(g.jsx)(tt,{name:"name",label:"Name"})}),Object(g.jsx)(G.a,{children:Object(g.jsx)(u.a,{className:"w-100 px-0",children:Object(g.jsx)(et,{card:c})})})]}),Object(g.jsx)(G.a,{className:"row-cols-5 pt-2",children:Ye.map((function(e,t){return Object(g.jsx)("div",{className:z[t],children:Object(g.jsx)(Xe,{name:e,label:"".concat(t+1)})})}))})]})}),Object(g.jsx)(u.a,{xs:12,lg:7,className:"p-0",children:Object(g.jsx)("div",{className:"p-2",children:Ye.map((function(e,t){return Object(g.jsx)("div",{className:24!==t?"pb-2":"",children:Object(g.jsx)(tt,{name:e,label:"Tile ".concat(t+1)})})}))})}),Object(g.jsx)(u.a,{xs:12})]}),Object(g.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:t,children:"Submit"})]})},at=function(e){var t=e.card,c=Object(o.useState)({}),n=Object(i.a)(c,2),a=n[0],l=a.success,d=(a.cardName,n[1]),j=Object(x.f)(),u=t?Object(y.a)(Object(y.a)({},Object.fromEntries(Ge.map((function(e){return[e,t[e]]})))),{},{category:t.category.name}):Je.getDefault(),b=function(){var e=Object(s.a)(r.a.mark((function e(c,n){var a,s,o,l,j,b,h;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setErrors,s=n.resetForm,o=Object(y.a)(Object(y.a)({},c),{},{category:{name:c.category}}),l=function(e){return B.createCard(e)},t&&(l=function(e){return B.editCard(t.id,e)},o=Object.fromEntries(Object.entries(o).filter((function(e){var t=Object(i.a)(e,2),c=t[0],n=t[1];return"category"!==c&&n!==u[c]})))),e.next=6,l(o);case 6:return j=e.sent,b=j.data,!(h=j.ok)&&b?a(Object.fromEntries(Object.entries(b).map((function(e){var t=Object(i.a)(e,2);return[t[0],t[1][0]]})))):h&&!t&&s(),ze({CARDCREATE:"submitted card",data:b,ok:h}),d({success:h,cardName:o.name}),e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();ze({CARDCREATE:"layout render"});var h=t?"edit":"creat",O=h.charAt(0).toUpperCase()+h.slice(1);return l?Object(g.jsxs)(M,{card:!0,children:[Object(g.jsxs)("h2",{className:"mb-4",children:["Successfully ",h,"ed bingo card!"]}),Object(g.jsx)("button",{className:"btn btn-primary",onClick:function(){return j.go(-1)},children:"Go Back"})]}):Object(g.jsx)("div",{className:"px-2",children:Object(g.jsx)(Ie.d,{validationSchema:Je,initialValues:u,onSubmit:b,children:function(e){var c=e.isSubmitting,n=e.setFieldValue,a=e.values;return Object(g.jsx)(Ze.Provider,{value:{setFieldValue:n,values:a},children:c?Object(g.jsx)(se,{message:"".concat(O,"ing new bingo card...")}):Object(g.jsx)(nt,{isSubmitting:c,card:t})})}})})},rt=function(){var e=Object(x.h)().cardId;return e?Object(g.jsx)(je,{apiCall:function(){return B.getCard("".concat(e))},component:function(e){var t=e.data;return Object(g.jsx)(at,{card:t})}},e):Object(g.jsx)(at,{})},st=Object(o.forwardRef)((function(e,t){var c=e.children;return Object(g.jsx)("div",{ref:t,children:c})})),it=function(e){var t=e.label,c=e.apiCall,n=e.resultMapper,a=Object(o.useReducer)((function(e,c){switch(E({SEARCHBAR:"reducer",label:t,state:e,action:c}),c.type){case"query":return setTimeout((function(){E({SEARCHBAR:"input check",label:t,query:u,queryRef:N}),u&&u===N.current&&(E("searching for searchResults..."),w())}),500),Object(y.a)(Object(y.a)({},e),{},{query:c.payload,showDropdown:!1,disabled:!!e.disabled&&c.payload.length>0});case"dropdown":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:c.payload});case"results":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:!0,loading:!1,searchResults:c.payload});case"menuSelect":return Object(y.a)(Object(y.a)({},e),{},{disabled:Boolean(c.payload.query.length>0),query:c.payload.query});case"load":return Object(y.a)(Object(y.a)({},e),{},{showDropdown:!c.payload,loading:c.payload})}}),{query:"",showDropdown:!1,loading:!1,disabled:!1,searchResults:[]}),l=Object(i.a)(a,2),d=l[0],j=d.disabled,u=d.query,b=d.showDropdown,h=d.loading,x=d.searchResults,m=l[1],v=j,N=Object(o.useRef)(u);N.current=u,E({SEARCHBAR:"states",label:t,query:u,disabled:j});var w=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m({type:"load",payload:!0}),e.next=3,c(u);case 3:t=e.sent,n=t.data,t.ok&&n?(E(n),m({type:"results",payload:n})):m({type:"load",payload:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){return Object(g.jsx)(g.Fragment,{children:h&&Object(g.jsx)("div",{className:"input-group-append",children:Object(g.jsx)("span",{className:"input-group-text",children:Object(g.jsx)("div",{className:"pl-2",children:Object(g.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:Object(g.jsx)("span",{className:"sr-only",children:"Loading..."})})})})})})},C=function(){return Object(g.jsx)(g.Fragment,{children:!v&&u.length>0&&Object(g.jsx)("div",{className:"input-group-append",style:{cursor:"pointer"},onClick:function(){return m({type:"query",payload:""})},children:Object(g.jsx)("span",{className:"input-group-text clear",children:Object(g.jsx)(p.a,{icon:f.m})})})})},S=function(){return Object(g.jsx)(g.Fragment,{children:n(x,u)})},T=function(){return Object(g.jsx)("div",{className:"input-group-prepend",children:Object(g.jsx)("span",{className:"input-group-text",children:t})})};return Object(g.jsxs)(O.a,{show:b,onToggle:function(){return m({type:"dropdown",payload:!b})},onSelect:function(){return m({type:"query",payload:""})},children:[Object(g.jsxs)("div",{className:"input-group slight-bg rounded",children:[Object(g.jsx)(T,{}),Object(g.jsx)("input",{disabled:v,type:"text",className:"form-control",placeholder:v?"":"Search",value:v?"":u,onChange:function(e){return m({type:"query",payload:e.target.value})}}),Object(g.jsx)(C,{}),Object(g.jsx)(k,{})]}),Object(g.jsx)(O.a.Toggle,{as:st,id:"search-bar-".concat(t)}),Object(g.jsx)(O.a.Menu,{className:"w-100 slight-bg mt-1 px-2",children:Object(g.jsx)(S,{})})]})},ot=(c(247),function(e,t){var c=e.children;return Object(g.jsx)("div",{ref:t,children:c})}),lt=function(e){var t=e.icon;return Object(g.jsx)("h4",{className:"m-0",children:Object(g.jsx)(p.a,{icon:t})})},dt=function(){var e=Object(o.useContext)(W),t=Object(o.useState)(!1),c=Object(i.a)(t,2),n=c[0],a=c[1],r=function(){return a(!n)},s=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.a.Item,{className:"slight-bg",disabled:!0,children:e?e.name:"Not Logged In"}),Object(g.jsx)(O.a.Divider,{}),e?Object(g.jsxs)(O.a.Item,{as:m.b,to:{pathname:"/users/".concat(e.id,"/"),state:{userId:e.id}},children:[Object(g.jsx)(p.a,{icon:f.c})," Profile"]}):Object(g.jsx)(O.a.Item,{className:"slight-bg",as:m.b,to:"/login/",children:"Login"})]})};return Object(g.jsxs)(O.a,{show:n,onToggle:r,children:[Object(g.jsx)("div",{onClick:r,style:{cursor:"pointer"},className:"hover-white",children:Object(g.jsx)(lt,{icon:f.o})}),Object(g.jsx)(O.a.Toggle,{as:ot,id:"login-dropdown"}),Object(g.jsx)(O.a.Menu,{align:"right",className:"slight-bg",children:Object(g.jsx)(s,{})})]})},jt=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(o.useContext)(W),s=Object(x.h)(),l=s.categoryName,d=void 0===l?"":l;console.log({TOPNAV:"render",categoryName:d,params:s});var v=function(){return Object(g.jsxs)(g.Fragment,{children:[r&&Object(g.jsx)(b.a.Item,{className:"pr-3",children:Object(g.jsx)(b.a.Link,{as:m.b,to:{pathname:"/create/",state:{categoryName:d}},children:Object(g.jsx)(lt,{icon:f.h})})}),Object(g.jsx)(b.a.Item,{children:Object(g.jsx)(dt,{})})]})},N=Object(g.jsx)(it,{label:"Search",apiCall:function(e){return B.getTopThreeCards(e)},resultMapper:function(e,t){return e.length>0?[].concat(Object(n.a)(e.map((function(e){return Object(g.jsxs)(O.a.Item,{as:m.b,to:"/cards/".concat(e.id,"/"),children:[Object(g.jsx)(p.a,{icon:f.l})," ",Object(g.jsx)(p.a,{icon:f.i})," ",e.name]})}))),[Object(g.jsxs)(O.a.Item,{as:m.b,to:"/search/?q=".concat(t),children:[Object(g.jsx)(p.a,{icon:f.k}),' Search bingo cards for "',t,'"']})]):[Object(g.jsx)(O.a.Item,{className:"slight-bg",disabled:!0,children:"No results found"})]}});return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.a,{id:"desktop-topnav",className:"shadow sdark-fg d-none d-lg-block",variant:"dark",sticky:"top",children:Object(g.jsxs)(j.a,{children:[Object(g.jsx)(u.a,{xs:3,children:Object(g.jsx)(b.a,{children:Object(g.jsx)(b.a.Item,{children:Object(g.jsx)(b.a.Link,{as:m.b,to:"/categories/TrashTaste1/",children:"TrashTaste1"})})})}),Object(g.jsx)(u.a,{xs:6,className:"w-100",children:Object(g.jsx)("div",{className:"align-items-center justify-content-center",children:N})}),Object(g.jsx)(u.a,{xs:3,children:Object(g.jsx)(b.a,{className:"align-items-center justify-content-end",children:Object(g.jsx)(v,{})})})]})}),Object(g.jsxs)(h.a,{id:"mobile-topnav",className:"shadow sdark-fg d-lg-none",variant:"dark",sticky:"top",children:[Object(g.jsxs)(j.a,{id:"topnav-buttons",className:"w-100 "+(c?"d-none":""),children:[Object(g.jsx)(u.a,{xs:6,children:Object(g.jsx)(b.a,{children:Object(g.jsx)(b.a.Item,{children:Object(g.jsx)(b.a.Link,{as:m.b,to:"/categories/TrashTaste1/",children:"TrashTaste1"})})})}),Object(g.jsx)(u.a,{xs:6,children:Object(g.jsxs)(b.a,{className:"align-items-center justify-content-end",children:[Object(g.jsx)(b.a.Item,{onClick:function(){return a(!0)},className:"pr-3",children:Object(g.jsx)(b.a.Link,{children:Object(g.jsx)(lt,{icon:f.k})})}),Object(g.jsx)(v,{})]})})]}),Object(g.jsxs)(j.a,{id:"topnav-search",className:"py-1 "+(c?"":"d-none"),children:[Object(g.jsx)(u.a,{xs:1,className:"px-2",children:Object(g.jsx)("div",{onClick:function(){return a(!1)},style:{cursor:"pointer"},children:Object(g.jsx)(lt,{icon:f.m})})}),Object(g.jsx)(u.a,{xs:11,className:"px-2",children:N})]})]})]})},ut=function(){var e=Object(o.useState)(null),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(o.useEffect)((function(){Object(s.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getSession();case 2:t=e.sent,c=t.data,t.ok&&c&&c.user&&n(c.user);case 6:case"end":return e.stop()}}),e)})))()}),[]),Object(g.jsx)("div",{className:"sdark-bg",children:Object(g.jsxs)(m.a,{children:[Object(g.jsx)(W.Provider,{value:c,children:Object(g.jsx)(jt,{})}),Object(g.jsx)(j.a,{children:Object(g.jsx)("div",{className:"py-2",children:Object(g.jsxs)(x.c,{children:[Object(g.jsx)(x.a,{exact:!0,path:"/",children:Object(g.jsx)(v,{})}),Object(g.jsx)(x.a,{exact:!0,path:"/signup/",children:Object(g.jsx)(Me,{})}),Object(g.jsx)(x.a,{exact:!0,path:"/login/",children:Object(g.jsx)(Be,{login:function(e){return n(e)},logout:function(){return n(null)},user:c})}),Object(g.jsxs)(W.Provider,{value:c,children:[Object(g.jsx)(x.a,{exact:!0,path:"/search/",children:Object(g.jsx)(_e,{})}),Object(g.jsx)(x.a,{path:"/categories/:categoryName/",children:Object(g.jsx)(de,{})}),Object(g.jsx)(x.a,{path:"/users/:userId/",children:Object(g.jsx)(Oe,{})}),Object(g.jsx)(x.a,{exact:!0,path:"/cards/:cardId/edit/",children:Object(g.jsx)(rt,{})}),Object(g.jsx)(x.a,{exact:!0,path:"/cards/:cardId/",children:Object(g.jsx)(Re,{})}),Object(g.jsx)(x.a,{path:"/create/",children:Object(g.jsx)(rt,{})}),Object(g.jsx)(x.a,{path:"/profile/",children:Object(g.jsx)(Oe,{})})]}),Object(g.jsx)(x.a,{children:Object(g.jsx)("h2",{className:"text-sdark-red text-center",children:"Page Not Found."})})]})})})]})})};d.a.render(Object(g.jsx)(ut,{}),document.getElementById("root"))}},[[248,1,2]]]);
//# sourceMappingURL=main.7bb0faa2.chunk.js.map
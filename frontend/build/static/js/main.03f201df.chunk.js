(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{122:function(e,t,c){},269:function(e,t,c){},270:function(e,t,c){"use strict";c.r(t);var n=c(18),a=c(4),r=c(1),s=c(51),i=c.n(s),o=(c(159),c(41)),l=c(9),j=c(3),d=c(12),u=c(55),b=c(14),x=c(13),O=c(23),h=c(21),m=c(11),p=c(46),g=function(e){var t=Object.entries(e).map((function(e){var t=Object(a.a)(e,2),c=t[0],n=t[1];return"".concat(c,": ").concat(n)})).join("\n  ");console.log("{\n  ".concat(t,"\n}"))},f=c(0),v=function(e){return e.get("sort")||"hot"},N={hot:"-hot,-best,-created_at",new:"-created_at",best:"-best,-created_at"},y={hot:m.f,new:m.n,best:m.b},w=function(e,t){return Array(t-e+1).fill(0).map((function(t,c){return c+e}))},k=function(e,t){var c;c=t<=7?7:e>4&&e<t-3?2:4;var a={start:Math.round(e-c/2),end:Math.round(e+c/2)};a.start-1!==1&&a.end+1!==t||(a.start+=1,a.end+=1);var r=e>c?w(Math.min(a.start,t-c),Math.min(a.end,t)):w(1,Math.min(t,c+1)),s=function(e,c){return r.length+1!==t?c:[e]};if(1!==r[0]){var i=s(1,[1,0]);g({FIRST:"",wd:i,pages:r}),r=[].concat(Object(n.a)(i),Object(n.a)(r))}if(r[r.length-1]<t){var o=s(t,[0,t]);g({SECOND:"",wd:o,pages:r}),r=[].concat(Object(n.a)(r),Object(n.a)(o))}return r},C=function(e){var t=e.pageSize,c=e.itemCount,n=(e.label,e.top),r=void 0!==n&&n,s="w-100 rounded p-2 text-center",i=Math.ceil(c/t),o=Object(O.g)(),m=o.pathname,p=new URLSearchParams(o.search),g=v(p),w=parseInt(p.get("page")||"1");p.delete("page");var C=p.toString(),S=function(e){var t,c=e.index,n=void 0===c?0:c,a=n===w?"bg-sdark-orange text-white":"sdark-fg",r=Object(f.jsx)("div",{className:"".concat(s," ").concat(a," ").concat(n?"page-btn":""),children:n||"..."});if(n&&n!==w){var i=new URLSearchParams(C);i.set("page","".concat(n)),t=Object(f.jsx)(x.b,{to:"".concat(m,"?").concat(i.toString()),children:r})}else t=r;return t},A=(b.a,b.a.Toggle,"sdark-fg border-0 p-0 w-100 ".concat(s),b.a.Menu,b.a.ItemText,b.a.Divider,Object.keys(N).filter((function(e){return e!==g})).map((function(e){return p.set("sort",e),Object(f.jsx)(b.a.Item,{as:x.b,to:"".concat(m,"?").concat(p.toString()),children:e})})),function(e){var t=e.rowSize,c=k(w,i);c.length<t&&Array(t-c.length).fill(null).forEach((function(e){return c.push(e)}));var n=t-1;return Object(f.jsx)(l.a,{className:"row-cols-".concat(t),children:c.map((function(e,t){return Object(f.jsx)(j.a,{className:"p-0",children:Object(f.jsx)("div",{className:t===n?"":"pe-2",children:null!==e&&Object(f.jsx)(S,{index:e})})})}))})}),R=function(){var e=new URLSearchParams(o.search);e.delete("page");return Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{className:"p-0",children:Object(f.jsx)("div",{className:"rounded py-2 px-3 sdark-fg",children:Object(f.jsx)(u.a,{variant:"dark",className:"p-0",children:Object(f.jsx)(d.a,{children:Object.entries(N).map((function(t){var c=Object(a.a)(t,2),n=c[0];c[1];return e.set("sort",n),Object(f.jsx)(d.a.Item,{className:"px-2 me-2 ".concat(n===g?"rounded-pill sdark-bg":""),children:Object(f.jsx)(d.a.Link,{as:x.b,to:"".concat(m,"?").concat(e.toString()),children:Object(f.jsxs)("p",{className:"text-capitalize m-0",children:[Object(f.jsx)(h.a,{icon:y[n],className:"me-3"}),n]})})})}))})})})})})},I=function(){return Object(f.jsx)(A,{rowSize:7})};return r?Object(f.jsx)(R,{}):Object(f.jsx)(I,{})},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=new URLSearchParams(e.search);return c.set("ordering",N[v(c)]),c.delete("sort"),Object.entries(t).forEach((function(e){var t=Object(a.a)(e,2),n=t[0],r=t[1];return c.set(n,r)})),c.toString()},A=c(2),R=c(10),I=c.n(R),F=c(22),E=c(45),T=new(c(153).a),q={credentials:"same-origin"},D=function(){return{"X-CSRFToken":T.get("csrftoken")}},L=function(){var e=Object(F.a)(I.a.mark((function e(t){var c,n,a,r,s=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2?s[2]:void 0,g({BACKEND:1,url:t,data:c}),a=0===Object.keys(c).length,n=n||(a?"GET":"POST"),r=Object(A.a)(Object(A.a)({},q),{},{method:n}),a||(r=Object(A.a)(Object(A.a)({},r),{},{headers:Object(A.a)(Object(A.a)({},D()),{},{"Content-Type":"application/json"}),body:JSON.stringify(c)})),e.next=9,P(t,r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(F.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,Object(A.a)(Object(A.a)({},q),{},{method:"DELETE",headers:Object(A.a)({},D())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(F.a)(I.a.mark((function e(t,c){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api").concat(t),c);case 2:return n=e.sent,a=null,e.prev=4,e.next=7,n.json();case 7:a=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.abrupt("return",{data:a,ok:n.ok});case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,c){return e.apply(this,arguments)}}(),M={login:function(e){return L("/login/",e)},logout:function(){return L("/logout/")},editCard:function(e,t){return L("/cards/".concat(e,"/"),t,"PATCH")},deleteCard:function(e){return B("/cards/".concat(e,"/"))},createUser:function(e){return L("/signup/",e)},createVote:function(e){return L("/votes/",e)},createSubscription:function(e){return L("/subscribe/",e)},createFollow:function(e){return L("/follow/",e)},createCard:function(e){return L("/cards/",e)},getSession:function(){return L("/session/")},getCard:function(e){return L("/cards/".concat(e,"/"))},getUser:function(e){return L("/users/".concat(e,"/"))},getCategory:function(e){return L("/categories/".concat(e,"/"))},getCardList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return L("/cards/?".concat(S(e,t)))},getHomeCards:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return L("/home/?".concat(S(e,t)))},getTopThreeCards:function(e){return L("/bar/cards/?search=".concat(e))},getTopThreeCategories:function(e){return L("/bar/categories/?search=".concat(e))},getPopularCategories:function(){return L("/popular/categories/")}},_=Object(r.createContext)({user:null,login:function(e){return Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},logout:function(e){return Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},getSession:function(){return Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},ifAuth:function(e){}}),U=function(e){var t=e.children,c=function(){var e=Object(r.useState)(null),t=Object(a.a)(e,2),c=t[0],n=t[1],s=Object(O.f)();return{user:c,login:function(e){return Object(F.a)(I.a.mark((function t(){var c,a,r,s,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.credentials,a=e.callback,t.next=3,M.login(c);case 3:r=t.sent,s=r.data,(i=r.ok)&&s&&s.user&&n(s.user),a&&a({data:s,ok:i});case 8:case"end":return t.stop()}}),t)})))()},logout:function(e){return Object(F.a)(I.a.mark((function t(){var c,a,r,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.callback,t.next=3,M.logout();case 3:a=t.sent,r=a.data,(s=a.ok)&&n(null),c&&c({data:r,ok:s});case 8:case"end":return t.stop()}}),t)})))()},getSession:function(){return Object(F.a)(I.a.mark((function e(){var t,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getSession();case 2:t=e.sent,c=t.data,t.ok&&c&&c.user&&n(c.user);case 6:case"end":return e.stop()}}),e)})))()},ifAuth:function(e){c?e():(g({IFAUTH:"redirect to login"}),s.push("/login/"))}}}();return Object(r.useEffect)((function(){c.getSession()}),[]),Object(f.jsx)(_.Provider,{value:c,children:t})},H=function(){return Object(r.useContext)(_)},V=c(52),Y=function(e){var t=e.card,c=e.children;return Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"w-100",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-2 d-none d-lg-block"}),Object(f.jsx)("div",{className:"col-12 col-lg-8",children:Object(f.jsx)("div",{children:t?Object(f.jsx)("div",{className:"py-4 text-center rounded sdark-fg m-2",children:c}):c})}),Object(f.jsx)("div",{className:"col-2 d-none d-lg-block"})]})})})},z=function(){var e={"pt-1":[1,2,3,4,5],"pe-1":[5,10,15,20,25],"ps-1":[1,6,11,16,21],"pb-1":[21,22,23,24,25]};return Array(25).fill(0).map((function(t,c){c++;var n=["pt-1","pb-1","ps-1","pe-1"];return Object.entries(e).forEach((function(e){var t=Object(a.a)(e,2),r=t[0];if(t[1].includes(c)){var s=n.indexOf(r);n.splice(s,1)}})),n.join(" ")}))}(),J=["January","February","March","April","May","June","July","August","September","October","November","December"],G=function(e){var t=new Date(Date.parse(e)),c=new Date,n=t.getFullYear()!==c.getFullYear()?", ".concat(t.getFullYear()%100):"";return"".concat(J[t.getMonth()]," ").concat(t.getDate()).concat(n)},K=function(e){var t=e.subbed,c=e.apiCall,n=Object(r.useState)(t),s=Object(a.a)(n,2),i=s[0],o=s[1],l=H().ifAuth;return Object(f.jsx)(V.a,{variant:i?"secondary":"danger",className:"rounded-pill",onClick:function(){return l((function(){o(!i),c()}))},children:i?"Subscribed":"Subscribe"})},Q=function(e){var t=e.category,c=e.name,n=Object(O.f)();return Object(f.jsxs)(V.a,{variant:"primary",className:"text-white rounded-pill mb-2 me-2 py-1",onClick:function(){return n.push("/categories/".concat(t.name,"/?hashtag=").concat(c))},children:["#",c]})},W=function(e){var t=e.categories;return Object(f.jsx)(j.a,{children:t.map((function(e){return Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{className:"my-2",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:2,children:Object(f.jsx)("div",{className:"rounded-circle p-4",style:{backgroundImage:'url("'.concat(e.icon_url,'")'),backgroundPosition:"center",backgroundSize:"cover"}})}),Object(f.jsx)(j.a,{children:Object(f.jsxs)("small",{children:[Object(f.jsx)(x.b,{to:"/categories/".concat(e.name),children:Object(f.jsx)("b",{children:e.name})}),Object(f.jsxs)("p",{children:[e.subscriber_count," Subscriber",1===e.subscriber_count?"":"s"]})]})}),Object(f.jsx)(j.a,{className:"pe-0",children:Object(f.jsx)(K,{subbed:e.is_subscribed,apiCall:function(){return M.createSubscription({id:e.id})}})})]})})})}))})},X=6e4,$=36e5,Z=24*$,ee=31*Z,te={year:321408e5,month:ee,day:Z,hour:$,minute:X},ce=function(e){var t=new Date(Date.now()),c=new Date(Date.parse(e)),n=t.getTime()-c.getTime();for(var a in te){var r=te[a];if(n>=r){var s=Math.floor(n/r),i=(s=r===X?s%60:s)>1?"s":"";return"".concat(s," ").concat(a).concat(i," ago")}}return"just now"},ne=function(){var e=Object(F.a)(I.a.mark((function e(t,c){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.createVote({card:{id:t.id},up:c});case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ae=function(e){var t=e.card,c=H().user,n="sdark-fg",s="sdark-orange",i="sdark-violet",o=!1,l=!1,d=0,u="text-".concat(n);null!==t.upvoted&&(d=t.upvoted?-1:1,t.upvoted?(o=!0,u="text-".concat(s)):(l=!0,u="text-".concat(i)));var b=d,x=Object(r.useState)(o),O=Object(a.a)(x,2),h=O[0],p=O[1],g=Object(r.useState)(l),v=Object(a.a)(g,2),N=v[0],y=v[1],w=Object(r.useState)(u),k=Object(a.a)(w,2),C=k[0],S=k[1],A=function(e,t,c){p(!1),y(!1),c(!t),S("text-"+(t?n:e))},R=h?s:n,I=N?i:n,F=0;h&&!N?F=1:N&&!h&&(F=-1),F+=b;var E=Boolean(c);return Object(f.jsxs)(j.a,{xs:2,className:"border-sdark-right text-center",children:[Object(f.jsx)(re,{icon:m.b,color:R,loggedIn:E,voteAction:function(){A(s,h,p),ne(t,!0)},user:c}),Object(f.jsx)("div",{className:"my-1 ".concat(C),children:Object(f.jsx)("h5",{children:t.score+F})}),Object(f.jsx)(re,{icon:m.a,color:I,loggedIn:E,voteAction:function(){A(i,N,y),ne(t,!1)},user:c})]})},re=function(e){var t=e.icon,c=e.color,n=e.loggedIn,a=e.voteAction,r=e.user;return Object(f.jsx)("div",{className:"text-".concat(c," ").concat(r?"vote-btn":""," p-1 rounded"),onClick:n?a:function(){},style:n?{cursor:"pointer"}:{},children:Object(f.jsx)(h.a,{icon:t})})},se=function(e){var t=e.card,c=e.link,n=Object(O.f)(),s=Object(r.useState)(!1),i=Object(a.a)(s,2),o=i[0],d=i[1],u=H().user,b=function(){return d(!o)},p=Object(f.jsx)(x.b,{to:"/users/".concat(t.author.id,"/"),children:t.author.name}),g=Object(f.jsx)(x.b,{to:"/categories/".concat(t.category.name,"/"),children:t.category.name}),v="/cards/".concat(t.id,"/"),N=function(){return c?Object(f.jsx)(x.b,{to:v,children:Object(f.jsx)("h5",{children:t.name})}):Object(f.jsx)("h5",{children:t.name})},y=function(){return Object(f.jsxs)(j.a,{children:[Object(f.jsx)(l.a,{children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(N,{}),Object(f.jsxs)("p",{className:"text-sdark-fg",children:["submitted ",ce(t.created_at)," by ",p," to ",g]})]})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{children:t.hashtags.map((function(e){return Object(f.jsx)(Q,{name:e.name,category:t.category})}))})})]})},w=function(){return Object(f.jsx)(f.Fragment,{children:u&&t.author.id===u.id&&Object(f.jsxs)(j.a,{xs:1,className:"border-sdark-left text-center",children:[Object(f.jsx)(l.a,{className:"d-flex justify-content-center align-items-center h-50",children:Object(f.jsx)(x.b,{to:"/cards/".concat(t.id,"/edit/"),children:Object(f.jsx)("div",{className:"text-sdark-red",children:Object(f.jsx)(h.a,{icon:m.d})})})}),Object(f.jsx)(l.a,{className:"d-flex justify-content-center align-items-center h-50",children:Object(f.jsx)("div",{className:"text-sdark-red",style:{cursor:"pointer"},onClick:b,children:Object(f.jsx)(h.a,{icon:m.q})})})]})})},k=function(){return Object(f.jsxs)(E.a,{show:o,dialogAs:function(e){return Object(f.jsx)(E.a.Dialog,{centered:!0,children:Object(f.jsx)("div",Object(A.a)(Object(A.a)({},e),{},{className:"modal-content rounded slight-bg"}))})},children:[Object(f.jsx)(E.a.Header,{closeButton:!0,children:"Delete Bingo Card"}),Object(f.jsxs)(E.a.Body,{children:['Are you sure you want to delete bingo card "',t.name,'"?']}),Object(f.jsxs)(E.a.Footer,{children:[Object(f.jsx)("button",{className:"btn btn-danger",onClick:Object(F.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.deleteCard(t.id);case 2:n.go(0);case 3:case"end":return e.stop()}}),e)}))),children:"Yes"}),Object(f.jsx)("button",{className:"btn btn-success",onClick:b,children:"No"})]})]})};return Object(f.jsx)("div",{className:"p-3 rounded sdark-fg",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(ae,{card:t}),Object(f.jsx)(y,{}),Object(f.jsx)(w,{}),Object(f.jsx)(k,{})]})})},ie=c(102),oe=function(e){var t=e.apiCall,c=e.loadingMessage,n=e.component,s=Object(r.useState)({data:null,ok:!0}),i=Object(a.a)(s,2),o=i[0],l=o.data,j=o.ok,d=i[1];Object(r.useEffect)((function(){Object(F.a)(I.a.mark((function e(){var c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({APIRENDER:"getting data",data:l,ok:j}),e.next=3,t();case 3:c=e.sent,d(c);case 5:case"end":return e.stop()}}),e)})))()}),[]);var u=function(){return(null===l||void 0===l?void 0:l.detail)||!j?Object(f.jsx)("div",{className:"text-sdark-red text-center my-4",children:Object(f.jsx)("h3",{children:"Error"+((null===l||void 0===l?void 0:l.detail)?": ".concat(l.detail):"")})}):Object(f.jsxs)("div",{className:"text-center mt-4",children:[Object(f.jsx)(ie.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})}),c&&Object(f.jsx)("div",{className:"mt-2",children:c})]})},b=n,x=function(){return l&&!l.detail&&j?Object(f.jsx)(b,{data:l}):Object(f.jsx)(u,{})};return Object(f.jsx)(x,{})},le=(c(122),function(){return Object(f.jsx)(oe,{apiCall:function(){return M.getPopularCategories()},component:function(e){var t=e.data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"rounded sdark-fg py-3",children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{children:Object(f.jsx)("h4",{className:"mb-4",children:"Popular Categories"})})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(W,{categories:t.results})})]})}),Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"rounded sdark-fg py-3",children:[Object(f.jsx)("h4",{className:"mb-4",children:"Links"}),[["One","Two"],["Three","Four"]].map((function(e){return Object(f.jsx)(l.a,{children:e.map((function(e){return Object(f.jsx)(j.a,{children:Object(f.jsx)(x.b,{to:"/",children:e})})}))})}))]})})]})}},"popular-categories")}),je=function(e){var t=e.home,c=e.query,n=void 0===c?{}:c,a=e.key,r=H().user,s=Object(O.g)(),i=t&&r?M.getHomeCards:M.getCardList;return Object(f.jsx)(oe,{apiCall:function(){return i(s,n)},component:de},a)},de=function(e){var t=e.data,c=function(e){var c=e.header;return Object(f.jsx)("div",{className:"p-2",children:Object(f.jsx)(C,{itemCount:t.count,pageSize:t.page_size,label:"cards",top:c})})};return 0===t.count?Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{className:"p-2",children:Object(f.jsx)("div",{className:"rounded p-4 sdark-fg text-center",children:Object(f.jsx)("h3",{children:"No results found."})})})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(c,{header:!0}),Object(f.jsx)(l.a,{className:"row-cols-1",children:t.results.map((function(e){return Object(f.jsx)(j.a,{className:"p-2",children:Object(f.jsx)(se,{card:e,link:!0})})}))}),Object(f.jsx)(c,{})]})},ue=je,be=function(e){var t=e.header,c=e.query,n=e.home,a=e.infoCol,r=e.sidebarCol;return Object(f.jsxs)(f.Fragment,{children:[t,Object(f.jsx)("div",{className:"py-2",children:Object(f.jsx)(o.a,{children:Object(f.jsxs)(l.a,{children:[Object(f.jsxs)(j.a,{xs:12,lg:8,children:[a,Object(f.jsx)(je,{query:c,home:n},"".concat(Date.now()))]}),Object(f.jsxs)(j.a,{xs:4,className:"d-none d-lg-block",children:[r,Object(f.jsx)(le,{})]})]})})})]})},xe=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsx)("title",{children:"Home"})}),Object(f.jsx)(be,{home:!0,header:Object(f.jsx)(f.Fragment,{})})]})},Oe=function(e){var t=e.data,c=new URLSearchParams(Object(O.g)().search),n=Object(O.f)(),a=c.get("hashtag"),r=a?{hashtag:encodeURIComponent(a)}:{},s=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"banner",style:{backgroundImage:'url("'.concat(t.banner_url,'")')}}),Object(f.jsx)(u.a,{className:"sdark-fg p-3",variant:"dark",children:Object(f.jsx)(o.a,{children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:12,children:Object(f.jsxs)(d.a,{children:[Object(f.jsx)(d.a.Item,{children:Object(f.jsx)("div",{className:"rounded-circle p-2 sdark-fg",style:{position:"absolute",bottom:"-10px",width:"100px",height:"100px"},children:Object(f.jsx)("img",{src:t.icon_url,alt:"",className:"rounded-circle img-fluid w-100 h-100"})})}),Object(f.jsx)(d.a.Item,{style:{marginLeft:"120px"}}),Object(f.jsx)(d.a.Item,{className:"pe-4 d-none d-lg-block",children:Object(f.jsx)(j.a,{className:"p-0",children:Object(f.jsx)("h2",{className:"m-0",children:t.name})})}),Object(f.jsx)(d.a.Item,{className:"pe-2",children:Object(f.jsx)(K,{subbed:t.is_subscribed,apiCall:function(){return M.createSubscription({id:t.id})}})}),Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(V.a,{variant:"warning",onClick:function(){return n.push("/categories/".concat(t.name,"/create/"))},className:"text-white rounded-pill",children:"New"})}),a&&Object(f.jsx)(d.a.Item,{className:"ps-2",children:Object(f.jsxs)(V.a,{onClick:function(){return n.push("/categories/".concat(t.name,"/"))},variant:"primary",className:"text-white rounded-pill",children:["#",a,Object(f.jsx)(h.a,{icon:m.p,className:"ms-3"})]})})]})}),Object(f.jsx)(j.a,{xs:12,children:Object(f.jsx)(d.a,{className:"d-lg-none",children:Object(f.jsx)(d.a.Item,{className:"mt-3 ".concat(t.name.length>14?"":"mx-2"),children:Object(f.jsx)(j.a,{className:"p-0",children:t.name.length>14?Object(f.jsx)("h3",{className:"m-0",children:t.name}):Object(f.jsx)("h2",{className:"m-0",children:t.name})})})})})]})})})]})},i=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"p-3 sdark-fg rounded",children:[Object(f.jsx)("div",{className:"text-center",children:Object(f.jsxs)("h4",{className:"mb-4",children:["About ",t.name]})}),Object(f.jsx)("p",{className:"mb-4",children:t.description}),Object(f.jsxs)(l.a,{children:[Object(f.jsxs)(j.a,{children:[Object(f.jsx)("b",{children:"Subscribers"}),Object(f.jsx)("p",{children:t.subscriber_count})]}),Object(f.jsxs)(j.a,{children:[Object(f.jsx)("b",{children:"Created At"}),Object(f.jsx)("p",{children:G(t.created_at)})]})]})]})}),Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"p-3 sdark-fg rounded",children:[Object(f.jsx)("h4",{className:"mb-4",children:"Popular hashtags"}),t.hashtags.map((function(e){return Object(f.jsx)(Q,{category:t,name:e.name})}))]})}),Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"p-3 sdark-fg rounded",children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{children:Object(f.jsx)("h4",{className:"mb-4",children:"Related Categories"})})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(W,{categories:t.related_categories})})]})})]})};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsx)("title",{children:t.name})}),Object(f.jsx)(be,{header:Object(f.jsx)(s,{}),sidebarCol:Object(f.jsx)(i,{}),query:Object(A.a)(Object(A.a)({},r),{},{category:t.name})})]})},he=function(){var e=Object(O.h)().categoryName;return Object(f.jsx)(oe,{apiCall:function(){return M.getCategory(e)},component:Oe},e)},me=function(e){var t=e.data;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsxs)("title",{children:["overview of ",t.name]})}),Object(f.jsx)(be,{query:{user:t.id},infoCol:Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsx)(j.a,{children:Object(f.jsx)("div",{className:"text-center",children:Object(f.jsxs)("h4",{className:"my-2",children:["cards created by ",t.name]})})})}),sidebarCol:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{className:"bg-primary p-3 rounded-top",style:{height:"50px"}})}),Object(f.jsx)(l.a,{children:Object(f.jsxs)(j.a,{className:"sdark-fg p-3 rounded-bottom",children:[Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)("h3",{className:"mb-4",children:t.name})}),Object(f.jsxs)(l.a,{children:[Object(f.jsxs)(j.a,{children:[Object(f.jsx)("b",{children:"Score"}),Object(f.jsx)("p",{className:t.score>=0?"text-sdark-orange":"text-sdark-violet",children:Object(f.jsxs)("div",{className:"me-3",children:[Object(f.jsx)(h.a,{icon:t.score>=0?m.b:m.a})," ",t.score]})})]}),Object(f.jsxs)(j.a,{children:[Object(f.jsx)("b",{children:"Created At"}),Object(f.jsx)("p",{children:G(t.created_at)})]})]}),Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{})})]})})]})}),t.categories_created.length>0&&Object(f.jsx)(l.a,{className:"p-2",children:Object(f.jsxs)(j.a,{className:"rounded sdark-fg py-3",children:[Object(f.jsx)("h4",{className:"mb-4",children:"Categories Created"}),Object(f.jsx)(l.a,{children:Object(f.jsx)(W,{categories:t.categories_created})})]})})]})})]})},pe=function(){var e=Object(O.h)().userId;return Object(f.jsx)(oe,{apiCall:function(){return M.getUser(e)},component:me},e)},ge=c(68),fe=c(119),ve=function(e){return window.scrollTo({top:e,behavior:"smooth"})},Ne=function(){return ve(0)},ye=function(){return ve(document.body.scrollHeight)},we=function(e){var t=e.spacer,c=e.buttons,a=function(e,c,n){return Object(f.jsx)(d.a.Item,{onClick:n,children:Object(f.jsxs)(d.a.Link,{children:[Object(f.jsx)(h.a,{className:t?"text-sdark-spacer":"text-sdark-fg",icon:e}),Object(f.jsx)("br",{}),Object(f.jsx)("small",{className:t?"text-sdark-spacer":"text-sdark-fg",children:c})]})})};return Object(f.jsx)(u.a,{fixed:t?void 0:"bottom",className:t?"sdark-spacer py-0":"sdark-fg shadow py-1",children:Object(f.jsx)(o.a,{children:Object(f.jsxs)(d.a,{fill:!0,className:"w-100",children:[t?a(m.j,"Bottom of page"):[a(m.g,"Bottom",ye),a(m.h,"Top",Ne)],(null===c||void 0===c?void 0:c.length)&&c.map((function(e){return a.apply(void 0,Object(n.a)(e))}))]})})})},ke=function(e){return Object(f.jsxs)("div",{id:"navbars",className:"d-md-none",children:[Object(f.jsx)(we,{spacer:!0}),Object(f.jsx)(we,Object(A.a)({},e))]})},Ce=function(){var e=Array(5).fill(0).map((function(e,t){return t})),t=e.map((function(e){return Array(5).fill(0).map((function(t,c){return 5*c+e}))})),c=e.map((function(e){return Array(5).fill(0).map((function(t,c){return c+5*e}))})),a=Array(5).fill(0).map((function(e,t){return 4*t+4})),r=Array(5).fill(0).map((function(e,t){return 6*t}));return[].concat(Object(n.a)(t),Object(n.a)(c),[a,r])}(),Se=function(e,t,c,n){if(!navigator.maxTouchPoints){var a=c.tiles,r=a.indexOf(e);a[r].hovered=t,n(Object(A.a)(Object(A.a)({},c),{},{tiles:a}))}},Ae=function(e,t,c,n){var a=t.tiles,r=a.indexOf(e);a[r].clicked=!a[r].clicked,c(Object(A.a)(Object(A.a)({},t),{},{tiles:a}));var s=function(e){if(Ce.some((function(t){return t.every((function(t){return e.tiles[t].clicked}))})))return Ce.filter((function(t){return t.every((function(t){return e.tiles[t].clicked}))}))[0].map((function(t){return e.tiles[t]}))}(t);s&&n(s)},Re=function(e){return e.clicked?Ie:e.hovered?Fe:"sdark-fg"},Ie="bg-sdark-green text-white",Fe="bg-sdark-magenta text-white",Ee=function(e){var t=e.passedCard,c=e.cardInfo,n=Object(r.useState)((function(){var e=t.tiles.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{hovered:!1,clicked:!1})}));return e[12].clicked=!0,t.tiles=e,g({CARD:"init card"}),t})),s=Object(a.a)(n,2),i=s[0],o=s[1],d=Object(r.useState)(""),u=Object(a.a)(d,2),b=u[0],x=u[1],O=Object(r.useState)([]),v=Object(a.a)(O,2),N=v[0],y=v[1],w=Object(r.useState)(!0),k=Object(a.a)(w,2),C=k[0],S=k[1],R=Object(r.useRef)(null),I=Boolean(N.length),F=function(){window.scrollTo({top:0,behavior:"smooth"}),S(!1),R.current&&R.current.focus()},T=[[m.k,"Search",F]];C||T.push([m.e,"Expand",function(){return S(!0)}]);var q=i.tiles.filter((function(e){return e.text.toLowerCase().includes(b.toLowerCase())}));return g({CARD:"render",query:b,solution:N,topToggled:C}),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsx)("title",{children:i.name})}),Object(f.jsxs)(l.a,{className:"pt-2",children:[Object(f.jsxs)(j.a,{id:"info-and-indicators",xs:12,md:6,lg:5,className:"px-2",children:[Object(f.jsxs)("div",{id:"card-info",className:"pb-2 "+(C?"":"d-none d-md-block"),children:[Object(f.jsx)("div",{className:"mb-2",children:c}),Object(f.jsx)(j.a,{id:"indicators",className:"text-center",children:Object(f.jsx)(l.a,{className:"row-cols-5",children:i.tiles.map((function(e,t){return Object(f.jsx)(j.a,{className:"p-0 ".concat(z[t]),children:Object(f.jsx)(j.a,{className:"py-2 rounded ".concat(Re(e)),children:t+1})})}))})})]}),Object(f.jsxs)("div",{id:"search-bar",className:"pb-2",children:[!C&&Object(f.jsx)("div",{className:"d-md-none text-sdark-bg p-0 pb-1",children:Object(f.jsx)("small",{children:"Card info hidden. Click on the expand button to show them."})}),Object(f.jsxs)(fe.a,{children:[Object(f.jsx)(ge.a.Control,{placeholder:"Search bingo tiles",type:"string",className:"slight-bg",value:b,style:{cursor:"pointer"},onChange:function(e){return x(e.target.value)},onFocus:F,ref:R}),b&&Object(f.jsx)(fe.a.Text,{onClick:function(){x(""),S(!0)},style:{cursor:"pointer"},children:Object(f.jsx)(h.a,{icon:m.p})})]})]})]}),Object(f.jsxs)(j.a,{id:"tiles",xs:12,md:6,lg:7,className:"px-2",children:[b&&Object(f.jsx)("div",{className:"text-sdark-bg text-center p-0 "+(q.length?"pb-3":""),children:q.length?"".concat(q.length," result")+(q.length>1?"s":""):"No results"}),Object(f.jsx)(l.a,{className:"row-cols-1 row-cols-md-1",children:q.map((function(e,t){return Object(f.jsx)(j.a,{className:0===t?"pb-1":"py-1",children:Object(f.jsx)(j.a,{style:{cursor:"pointer"},className:"rounded h-100 py-2 ".concat(Re(e)),onClick:function(){return Ae(e,i,o,y)},onMouseEnter:function(){return Se(e,!0,i,o)},onMouseLeave:function(){return Se(e,!1,i,o)},children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:2,lg:1,className:"border"+(e.hovered||e.clicked?"":"-sdark")+"-right text-center",children:t+1}),Object(f.jsx)(j.a,{children:e.text})]})})})}))}),Object(f.jsx)("hr",{className:"sdark-hr"})]}),Object(f.jsxs)(E.a,{show:I,dialogAs:function(e){return Object(f.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(f.jsx)("div",Object(A.a)({},Object(A.a)(Object(A.a)({},e),{},{className:"modal-content rounded sdark-bg"})))})},children:[Object(f.jsx)(E.a.Header,{children:"You got Bingo!"}),Object(f.jsxs)(E.a.Body,{children:[Object(f.jsx)("div",{className:"text-center mb-4 mt-3",children:Object(f.jsx)("h3",{children:i.name})}),Object(f.jsx)(l.a,{className:"row-cols-1 p-1",children:N.map((function(e,t){return Object(f.jsx)(j.a,{className:"p-1",children:Object(f.jsx)(j.a,{className:"rounded h-100 p-2 sdark-fg",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:2,md:1,className:"border-sdark-right text-center",children:t+1}),Object(f.jsx)(j.a,{children:e.text})]})})})}))}),Object(f.jsxs)("div",{className:"text-center mt-4 mb-3",children:["Link:"," ",Object(f.jsx)("a",{href:window.location.href,className:"sdark-bg",children:window.location.href})]})]}),Object(f.jsx)(E.a.Footer,{children:Object(f.jsx)(V.a,{variant:"primary",onClick:function(){return function(e,t,c){if(e){var n=e.tiles.map((function(e){return e.hovered=!1,e.clicked=!1,e}));n[12].clicked=!0,t(Object(A.a)(Object(A.a)({},e),{},{tiles:n})),c([]),window.scrollTo({top:0,behavior:"smooth"})}}(i,o,y)},children:"Start Over"})})]})]}),Object(f.jsx)(ke,{id:"card-navbar",buttons:T})]})},Te=function(){var e=Object(O.h)().cardId;return Object(f.jsx)(oe,{apiCall:function(){return M.getCard(e)},loadingMessage:"Loading bingo card ".concat(e),component:function(e){var t=e.data;return Object(f.jsx)(Ee,{passedCard:t,cardInfo:Object(f.jsx)(se,{card:t})})}},e)},qe=c(44),De=c(31),Le=function(e){var t=e.message;return Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)(ie.a,{animation:"border",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})}),Object(f.jsx)("div",{className:"mt-2",children:"string"===typeof t?Object(f.jsx)("h4",{children:t}):t})]})},Be=function(){return qe.c().default("").required("Required")},Pe=qe.a().shape({username:Be(),password:Be()}),Me=function(){var e=H(),t=e.user,c=e.login,n=e.logout,s=Object(r.useState)({valid:!1,done:!1,ok:!0}),i=Object(a.a)(s,2),o=i[0],d=o.done,u=o.valid,b=o.ok,O=i[1],h=function(){var e=Object(F.a)(I.a.mark((function e(t,n){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.resetForm,O({done:!1,valid:u,ok:b}),c({credentials:t,callback:function(e){var t=e.data,c=e.ok;O({done:!0,valid:!!t&&t.valid,ok:c}),a()}});case 3:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),m=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)("h1",{children:"Login"}),d&&!b&&!1===u&&Object(f.jsx)("div",{className:"text-danger mt-4",children:"Invalid credentials"})]}),Object(f.jsx)("div",{className:"mt-4",children:Object(f.jsxs)(De.c,{noValidate:!0,children:[Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{children:Object(f.jsx)(ge.a.Label,{children:"Username"})}),Object(f.jsx)(j.a,{className:"w-100 text-end",children:Object(f.jsx)(De.a,{name:"username",component:"label",className:"text-danger"})}),Object(f.jsx)(j.a,{xs:12,children:Object(f.jsx)(De.b,{name:"username",className:"form-control"})})]}),Object(f.jsxs)(l.a,{className:"mt-2 mb-3",children:[Object(f.jsx)(j.a,{children:Object(f.jsx)(ge.a.Label,{children:"Password"})}),Object(f.jsx)(j.a,{className:"w-100 text-end",children:Object(f.jsx)(De.a,{name:"password",component:"label",className:"text-danger"})}),Object(f.jsx)(j.a,{xs:12,children:Object(f.jsx)(De.b,{name:"password",type:"password",className:"form-control"})})]}),Object(f.jsx)("button",{className:"btn btn-primary text-white",type:"submit",children:"Login"}),Object(f.jsx)(x.b,{to:"/signup/",children:Object(f.jsx)("button",{className:"btn btn-warning text-white ms-2",children:"Signup"})})]})})]})};return Object(f.jsx)(De.d,{validationSchema:Pe,initialValues:Pe.default(""),onSubmit:h,children:function(e){var c=e.isSubmitting,a=e.setSubmitting;return c?Object(f.jsx)(Le,{message:"Logging "+(t?"out":"in")+"..."}):t?Object(f.jsx)(Y,{card:!0,children:Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsxs)("h1",{children:["Logged in as ",t.name,"!"]}),Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){a(!0),n({callback:function(){a(!1)}})},children:"Logout"})]})}):Object(f.jsx)(m,{})}})},_e=function(){return Object(f.jsx)("div",{className:"py-4",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:3,className:"d-none d-lg-block"}),Object(f.jsx)(j.a,{xs:12,lg:6,children:Object(f.jsx)(Me,{})}),Object(f.jsx)(j.a,{xs:3,className:"d-none d-lg-block"})]})})},Ue=function(){return Object(f.jsx)("div",{className:"py-4",children:Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-3 d-none d-lg-block"}),Object(f.jsx)("div",{className:"col-12 col-lg-6",children:Object(f.jsx)(ze,{})}),Object(f.jsx)("div",{className:"col-3 d-none d-lg-block"})]})})},He=function(){return qe.c().default("").required("Required")},Ve=qe.a().shape({username:He().min(2,"Too Short!").max(50,"Too Long!"),password:He().min(10,"Too Short!"),confirmPassword:He().when("password",{is:function(e){return!!(e&&e.length>0)},then:qe.c().oneOf([qe.b("password")],"Needs to match password")}),email:He().email("Invalid email")}),Ye=[["Username","username","text"],["Email","email","email"],["Password","password","password"],["Confirm Password","confirmPassword","password"]],ze=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),c=t[0],n=t[1],s=Object(r.useState)(!1),i=Object(a.a)(s,2),o=i[0],d=i[1],u=function(){var e=Object(F.a)(I.a.mark((function e(t,c){var r,s,i,o,l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.resetForm,s=c.setErrors,d(!1),e.next=4,M.createUser({username:t.username,password:t.password,email:t.email});case 4:return i=e.sent,o=i.data,l=i.ok,o&&!l?s(Object.fromEntries(Object.entries(o).map((function(e){var t=Object(a.a)(e,2);return[t[0],t[1][0]]})))):l&&(r(),n(!0)),d(!0),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),b=function(e){var t=e.isSubmitting;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)("h1",{children:"Signup"})}),!c&&o&&Object(f.jsx)("div",{className:"text-danger text-center py-2",children:Object(f.jsx)("p",{children:"There was something wrong."})}),Object(f.jsxs)(De.c,{children:[Object(f.jsx)("div",{className:"mt-4 mb-3",children:Ye.map((function(e){var t=Object(a.a)(e,3),c=t[0],n=t[1],r=t[2];return Object(f.jsxs)(l.a,{className:"mb-2",children:[Object(f.jsx)(j.a,{children:Object(f.jsx)(ge.a.Label,{children:c})}),Object(f.jsx)(j.a,{className:"w-100 text-end",children:Object(f.jsx)(De.a,{name:n,component:"label",className:"text-danger"})}),Object(f.jsx)(j.a,{xs:12,children:Object(f.jsx)(De.b,{name:n,type:r,className:"form-control"})})]})}))}),Object(f.jsx)("button",{className:"btn btn-primary text-white",type:"submit",disabled:t,children:"Signup"}),Object(f.jsx)(x.b,{to:"/login/",children:Object(f.jsx)("button",{className:"btn btn-warning text-white ms-2",children:"Back to Login"})})]})]})},O=function(){return Object(f.jsxs)("div",{className:"text-center",children:[Object(f.jsx)("div",{className:"mb-2",children:Object(f.jsx)("h1",{children:"Account creation successful!"})}),Object(f.jsx)(x.b,{to:"/login/",children:Object(f.jsx)("button",{className:"btn btn-warning ms-2",children:"Back to Login"})})]})};return Object(f.jsx)(De.d,{validateOnBlur:!0,validateOnChange:!1,validationSchema:Ve,initialValues:Ve.getDefault(),onSubmit:u,children:function(e){var t=e.isSubmitting;return t?Object(f.jsx)(Le,{message:"Creating new account..."}):c?Object(f.jsx)(O,{}):Object(f.jsx)(b,{isSubmitting:t})}})},Je=function(){var e=new URLSearchParams(Object(O.g)().search).get("q")||"",t={search:encodeURIComponent(e)};return g({SEARCHVIEW:1,searchQuery:e}),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.a,{children:Object(f.jsx)("title",{children:"Search"})}),Object(f.jsx)(Y,{card:!0,children:Object(f.jsxs)("h3",{children:['Search results for "',e,'"']})}),Object(f.jsx)(ue,{query:t},"".concat(Date.now()))]})},Ge=Object(r.forwardRef)((function(e,t){var c=e.children;return Object(f.jsx)("div",{ref:t,children:c})})),Ke=Object(r.createContext)({setFieldValue:function(){},values:{}}),Qe=function(){var e=Object(r.useContext)(Ke),t=e.setFieldValue,c=e.values,n=e.card,s=e.category,i=c.category,o={query:i,showDropdown:!1,loading:!1,disabled:Boolean(i.length>0),errors:[],categories:[]},d=Object(r.useReducer)((function(e,c){switch(g({CATEGORYSEARCHBAR:"reducer",state:e,action:c}),c.type){case"query":return setTimeout((function(){g({CATEGORYSEARCHBAR:"input check",query:v,queryRef:R}),v&&v===R.current&&(g("searching for categories..."),E())}),500),Object(A.a)(Object(A.a)({},e),{},{query:c.payload,showDropdown:!1,disabled:!!e.disabled&&c.payload.length>0,errors:c.payload.length>0?e.errors:[]});case"dropdown":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:c.payload});case"category":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:!0,loading:!1,categories:c.payload});case"menuSelect":var n=c.payload.errors.length>0?"":c.payload.query;return t("category",n),Object(A.a)(Object(A.a)({},e),{},{disabled:Boolean(c.payload.query.length>0),query:c.payload.query,errors:c.payload.errors});case"load":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:!c.payload,loading:c.payload})}}),o),u=Object(a.a)(d,2),x=u[0],O=x.disabled,p=x.errors,v=x.query,N=x.showDropdown,y=x.loading,w=x.categories,k=u[1],C=0===p.length,S=O&&C,R=Object(r.useRef)(v);R.current=v,g({CATEGORYSEARCHBAR:"states",query:v,disabled:O,errors:p,categoryName:i});var E=function(){var e=Object(F.a)(I.a.mark((function e(){var t,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({type:"load",payload:!0}),e.next=3,M.getTopThreeCategories(v);case 3:t=e.sent,c=t.data,t.ok&&c?(g(c),k({type:"category",payload:c})):k({type:"load",payload:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){return Object(f.jsx)(f.Fragment,{children:y&&Object(f.jsx)("div",{className:"input-group-append",children:Object(f.jsx)("span",{className:"input-group-text",children:Object(f.jsx)("div",{className:"ps-2",children:Object(f.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})})})})})})},q=function(){return Object(f.jsx)(f.Fragment,{children:!S&&v.length>0&&Object(f.jsx)("div",{className:"input-group-append",style:{cursor:"pointer"},onClick:function(){return k({type:"query",payload:""})},children:Object(f.jsx)("span",{className:"input-group-text clear",children:Object(f.jsx)(h.a,{icon:m.p})})})})},D=function(){return Object(f.jsx)(f.Fragment,{children:S&&Object(f.jsx)("div",{className:"input-group-append",children:Object(f.jsx)("span",{className:"input-group-text clear p-1",children:Object(f.jsx)("div",{className:"p-2 rounded text-white bg-sdark-violet align-items-center justify-content-center",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{className:n||s?"":"pe-2",children:v}),!n&&!s&&Object(f.jsx)(j.a,{className:"ps-2",children:Object(f.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return k({type:"menuSelect",payload:{query:"",errors:[]}})},children:Object(f.jsx)("small",{children:Object(f.jsx)(h.a,{icon:m.p})})})})]})})})})})},L=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a.Item,{className:"slight-bg",disabled:!0,children:"Select one"}),Object(f.jsx)(b.a.Divider,{className:"border-slight-top"}),w.length>0?w.map((function(e){return Object(f.jsx)(b.a.Item,{className:"slight-bg",eventKey:e.name,children:e.name})})):Object(f.jsxs)(b.a.Item,{className:"slight-bg",eventKey:"QUERY!",children:["Create new category: ",v]})]})},B=function(){return Object(f.jsx)(f.Fragment,{children:p.length>0&&v.length>0&&p.map((function(e){return Object(f.jsx)("div",{className:"text-sdark-red",children:Object(f.jsx)("small",{children:e})})}))})},P=function(){return Object(f.jsx)("div",{className:"input-group-prepend",children:Object(f.jsx)("span",{className:"input-group-text ".concat(O?C?"success":"error":""),children:"Category"})})};return Object(f.jsxs)(b.a,{show:N,onToggle:function(){return k({type:"dropdown",payload:!N})},onSelect:function(e){var t=[];switch(e){case null:break;case"QUERY!":try{ct.validateSync(v)}catch(c){t=c.errors}k({type:"menuSelect",payload:{query:v,errors:t}});break;default:k({type:"menuSelect",payload:{query:e,errors:t}})}},children:[Object(f.jsxs)("div",{className:"input-group slight-bg rounded",children:[Object(f.jsx)(P,{}),Object(f.jsx)(D,{}),Object(f.jsx)("input",{disabled:S,type:"text",className:"form-control",placeholder:S?"":"Search",value:S?"":v,onChange:function(e){return k({type:"query",payload:e.target.value})}}),Object(f.jsx)(q,{}),Object(f.jsx)(T,{})]}),Object(f.jsx)("div",{children:Object(f.jsx)(B,{})}),Object(f.jsx)(b.a.Toggle,{as:Ge,id:"create-category"}),Object(f.jsx)(b.a.Menu,{className:"w-100 slight-bg mt-1 px-2",children:Object(f.jsx)(L,{})})]})},We=function(e){var t=e.name,c=e.label;return Object(f.jsx)(De.b,{name:t,children:function(e){var t=e.meta;return t.touched?Object(f.jsx)("div",{className:"rounded text-center py-2 text-white bg-sdark-".concat(t.error?"red":"green"),children:c}):Object(f.jsx)("div",{className:"rounded text-center py-2 sdark-fg",children:c})}})},Xe=function(e){var t=e.name,c=e.label,n=e.disabled;return Object(f.jsx)(De.b,{name:t,children:function(e){var t=e.field,a=e.meta,r=a.touched?a.error?"error":"success":n?"disabled":"";return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"input-group",children:[Object(f.jsx)("div",{className:"input-group-prepend",children:Object(f.jsx)("span",{className:"input-group-text ".concat(r),children:c})}),Object(f.jsx)("input",Object(A.a)(Object(A.a)({},t),{},{type:"text",className:"form-control",placeholder:"Empty",disabled:n}))]}),a.touched&&a.error&&Object(f.jsx)("div",{className:"text-sdark-red",children:Object(f.jsx)("small",{children:a.error})})]})}})},$e=function(e){"Enter"===e.key&&e.preventDefault()},Ze=function(){var e=Object(r.useContext)(Ke),t=e.card,c=e.category,n=e.isSubmitting,a=t?'Editing "'.concat(t.name,'"'):"Create New Bingo Card ".concat(c?"In ".concat(c.name):"");return Object(f.jsxs)(De.c,{onKeyDown:$e,children:[Object(f.jsx)(Y,{card:!0,children:Object(f.jsx)("h2",{children:a})}),Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:12,lg:5,children:Object(f.jsxs)("div",{className:"p-2",children:[Object(f.jsxs)(j.a,{className:"pb-2 px-0",children:[Object(f.jsx)(l.a,{className:"pb-2 px-0",children:Object(f.jsx)(Xe,{name:"name",label:"Name",disabled:Boolean(t)})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(j.a,{className:"w-100 px-0",children:Object(f.jsx)(Qe,{})})})]}),Object(f.jsx)(l.a,{className:"row-cols-5 pt-2",children:et.map((function(e,t){return Object(f.jsx)("div",{className:z[t],children:Object(f.jsx)(We,{name:e,label:"".concat(t+1)})})}))})]})}),Object(f.jsx)(j.a,{xs:12,lg:7,className:"p-0",children:Object(f.jsx)("div",{className:"p-2",children:et.map((function(e,t){return Object(f.jsx)("div",{className:24!==t?"pb-2":"",children:Object(f.jsx)(Xe,{name:e,label:"Tile ".concat(t+1)})})}))})}),Object(f.jsx)(j.a,{xs:12})]}),Object(f.jsx)("button",{className:"btn btn-primary",type:"submit",disabled:n,children:"Submit"})]})},et=Array(25).fill(null).map((function(e,t){return"tile_".concat(t+1)})),tt=function(e){return qe.c().default("").required("Cannot be blank.").max(e,"Cannot be longer than ".concat(e," characters."))},ct=tt(20).matches(/^\w+$/,{message:"Can only contain letters, numbers and underscores.",excludeEmptyString:!0}),nt=function(e){var t=e.card,c=e.category,n=Object(r.useState)(!1),s=Object(a.a)(n,2),i=s[0],o=s[1],l=Object(O.f)(),j=t?t.tiles:Array(25).fill(0).map((function(e,t){return{id:t,text:""}})),d=Object.fromEntries(j.map((function(e,t){return[et[t],e]}))),u=Object.fromEntries(Object.entries(d).map((function(e){var t=Object(a.a)(e,2),c=t[0];t[1];return[c,tt(200)]}))),b=qe.a().shape(Object(A.a)(Object(A.a)({},u),{},{name:tt(50),category:ct})),x=t?Object(A.a)(Object(A.a)({},Object.fromEntries(Object.entries(d).map((function(e){var t=Object(a.a)(e,2);return[t[0],t[1].text]})))),{},{name:t.name,category:t.category.name}):b.getDefault();c&&(x.category=c.name),g(x);var h=function(){var e=Object(F.a)(I.a.mark((function e(c,n){var r,s,i,l,j,u,b,x;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setErrors,s=n.resetForm,i=Object.entries(d).map((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return[n,c[n]]})),(l={tiles:i.map((function(e){var t=Object(a.a)(e,2),c=t[0],n=t[1];return Object(A.a)(Object(A.a)({},d[c]),{},{text:n})})),name:c.name,category:{name:c.category}}).tiles.forEach((function(e){return g(e)})),j=t?function(e){return M.editCard(t.id,e)}:function(e){return M.createCard(e)},e.next=7,j(l);case 7:return u=e.sent,b=u.data,!(x=u.ok)&&b?r(Object.fromEntries(Object.entries(b).map((function(e){var t=Object(a.a)(e,2);return[t[0],t[1][0]]})))):x&&!t&&s(),g({CARDCREATE:"submitted card",data:b,ok:x}),o(x),e.abrupt("return");case 14:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}();g({CARDCREATE:"layout render"});var m=t?"edit":"creat",p=m.charAt(0).toUpperCase()+m.slice(1);return i?Object(f.jsxs)(Y,{card:!0,children:[Object(f.jsxs)("h2",{className:"mb-4",children:["Successfully ",m,"ed bingo card!"]}),Object(f.jsx)("button",{className:"btn btn-primary",onClick:function(){return l.go(-1)},children:"Go Back"})]}):Object(f.jsx)("div",{className:"px-2",children:Object(f.jsx)(De.d,{validationSchema:b,initialValues:x,onSubmit:h,children:function(e){var n=e.isSubmitting,a=e.setFieldValue,r=e.values;return Object(f.jsx)(Ke.Provider,{value:{setFieldValue:a,values:r,card:t,category:c,isSubmitting:n},children:n?Object(f.jsx)(Le,{message:"".concat(p,"ing new bingo card...")}):Object(f.jsx)(Ze,{})})}})})},at=function(){var e=Object(O.h)(),t=e.cardId,c=e.categoryName;return t?Object(f.jsx)(oe,{apiCall:function(){return M.getCard(t)},component:function(e){var t=e.data;return Object(f.jsx)(nt,{card:t})}},t):c?Object(f.jsx)(oe,{apiCall:function(){return M.getCategory(c)},component:function(e){var t=e.data;return Object(f.jsx)(nt,{category:t})}},c):Object(f.jsx)(nt,{})},rt=Object(r.forwardRef)((function(e,t){var c=e.children;return Object(f.jsx)("div",{ref:t,children:c})})),st=function(e){var t=e.label,c=e.apiCall,n=e.resultMapper,s=Object(r.useReducer)((function(e,c){switch(g({SEARCHBAR:"reducer",label:t,state:e,action:c}),c.type){case"query":return setTimeout((function(){g({SEARCHBAR:"input check",label:t,query:j,queryRef:v}),j&&j===v.current&&(g("searching for searchResults..."),N())}),500),Object(A.a)(Object(A.a)({},e),{},{query:c.payload,showDropdown:!1,disabled:!!e.disabled&&c.payload.length>0});case"dropdown":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:c.payload});case"results":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:!0,loading:!1,searchResults:c.payload});case"menuSelect":return Object(A.a)(Object(A.a)({},e),{},{disabled:Boolean(c.payload.query.length>0),query:c.payload.query});case"load":return Object(A.a)(Object(A.a)({},e),{},{showDropdown:!c.payload,loading:c.payload})}}),{query:"",showDropdown:!1,loading:!1,disabled:!1,searchResults:[]}),i=Object(a.a)(s,2),o=i[0],l=o.disabled,j=o.query,d=o.showDropdown,u=o.loading,x=o.searchResults,O=i[1],p=l,v=Object(r.useRef)(j);v.current=j,g({SEARCHBAR:"states",label:t,query:j,disabled:l});var N=function(){var e=Object(F.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"load",payload:!0}),e.next=3,c(j);case 3:t=e.sent,n=t.data,t.ok&&n?(g(n),O({type:"results",payload:n})):O({type:"load",payload:!1});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){return Object(f.jsx)(f.Fragment,{children:u&&Object(f.jsx)("div",{className:"input-group-append",children:Object(f.jsx)("span",{className:"input-group-text",children:Object(f.jsx)("div",{className:"ps-2",children:Object(f.jsx)("div",{className:"spinner-border spinner-border-sm",role:"status",children:Object(f.jsx)("span",{className:"sr-only",children:"Loading..."})})})})})})},w=function(){return Object(f.jsx)(f.Fragment,{children:!p&&j.length>0&&Object(f.jsx)("div",{className:"input-group-append",style:{cursor:"pointer"},onClick:function(){return O({type:"query",payload:""})},children:Object(f.jsx)("span",{className:"input-group-text clear",children:Object(f.jsx)(h.a,{icon:m.p})})})})},k=function(){return Object(f.jsx)(f.Fragment,{children:n(x,j)})},C=function(){return Object(f.jsx)("div",{className:"input-group-prepend",children:Object(f.jsx)("span",{className:"input-group-text",children:t})})};return Object(f.jsxs)(b.a,{show:d,onToggle:function(){return O({type:"dropdown",payload:!d})},onSelect:function(){return O({type:"query",payload:""})},children:[Object(f.jsxs)("div",{className:"input-group slight-bg rounded",children:[Object(f.jsx)(C,{}),Object(f.jsx)("input",{disabled:p,type:"text",className:"form-control",placeholder:p?"":"Search",value:p?"":j,onChange:function(e){return O({type:"query",payload:e.target.value})}}),Object(f.jsx)(w,{}),Object(f.jsx)(y,{})]}),Object(f.jsx)(b.a.Toggle,{as:rt,id:"search-bar-".concat(t)}),Object(f.jsx)(b.a.Menu,{className:"w-100 slight-bg mt-1 px-2",children:Object(f.jsx)(k,{})})]})},it=(c(269),function(e,t){var c=e.children;return Object(f.jsx)("div",{ref:t,children:c})}),ot=function(e){var t=e.icon;return Object(f.jsx)("h4",{className:"m-0",children:Object(f.jsx)(h.a,{icon:t})})},lt=function(){var e=H(),t=e.user,c=e.logout,n=Object(r.useState)(!1),s=Object(a.a)(n,2),i=s[0],o=s[1],d=function(){return o(!i)},u=function(e){var t=e.label,c=e.icon;return Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{xs:3,children:Object(f.jsx)(h.a,{icon:c})}),Object(f.jsx)(j.a,{xs:9,children:t})]})},O=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a.Item,{className:"slight-bg",disabled:!0,children:t?Object(f.jsx)(u,{label:t.name,icon:m.r}):"Not Logged In"}),Object(f.jsx)(b.a.Divider,{}),t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a.Item,{as:x.b,to:{pathname:"/users/".concat(t.id,"/"),state:{userId:t.id}},children:Object(f.jsx)(u,{label:"Profile",icon:m.c})}),Object(f.jsx)(b.a.Item,{onClick:function(){return c({})},children:Object(f.jsx)(u,{label:"Logout",icon:m.m})})]}):Object(f.jsx)(b.a.Item,{className:"slight-bg",as:x.b,to:"/login/",children:Object(f.jsx)(u,{label:"Login",icon:m.l})})]})};return Object(f.jsxs)(b.a,{show:i,onToggle:d,children:[Object(f.jsx)("div",{onClick:d,style:{cursor:"pointer"},className:"hover-white",children:Object(f.jsx)(ot,{icon:m.s})}),Object(f.jsx)(b.a.Toggle,{as:it,id:"login-dropdown"}),Object(f.jsx)(b.a.Menu,{align:"end",className:"slight-bg",children:Object(f.jsx)(O,{})})]})},jt=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),c=t[0],s=t[1],i=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(lt,{})})})},l=Object(f.jsx)(st,{label:"Search",apiCall:function(e){return M.getTopThreeCards(e)},resultMapper:function(e,t){return e.length>0?[].concat(Object(n.a)(e.map((function(e){return Object(f.jsxs)(b.a.Item,{as:x.b,to:"/cards/".concat(e.id,"/"),children:[Object(f.jsx)(h.a,{icon:m.o})," ",Object(f.jsx)(h.a,{icon:m.i})," ",e.name]})}))),[Object(f.jsxs)(b.a.Item,{as:x.b,to:"/search/?q=".concat(t),children:[Object(f.jsx)(h.a,{icon:m.k}),' Search bingo cards for "',t,'"']})]):[Object(f.jsx)(b.a.Item,{className:"slight-bg",disabled:!0,children:"No results found"})]}});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.a,{id:"desktop-topnav",className:"sdark-fg d-none d-lg-block",variant:"dark",children:Object(f.jsxs)(o.a,{children:[Object(f.jsx)(j.a,{xs:3,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(d.a.Link,{as:x.b,to:"/",children:"BingoMemes"})})})}),Object(f.jsx)(j.a,{xs:6,children:Object(f.jsx)("div",{className:"align-items-center justify-content-center",children:l})}),Object(f.jsx)(j.a,{xs:3,children:Object(f.jsx)(d.a,{className:"align-items-center justify-content-end",children:Object(f.jsx)(i,{})})})]})}),Object(f.jsxs)(u.a,{id:"mobile-topnav",className:"sdark-fg d-lg-none",variant:"dark",children:[Object(f.jsxs)(o.a,{id:"topnav-buttons",className:"w-100 "+(c?"d-none":""),children:[Object(f.jsx)(j.a,{xs:6,children:Object(f.jsx)(d.a,{children:Object(f.jsx)(d.a.Item,{children:Object(f.jsx)(d.a.Link,{as:x.b,to:"/",children:"BingoMemes"})})})}),Object(f.jsx)(j.a,{xs:6,children:Object(f.jsxs)(d.a,{className:"align-items-center justify-content-end",children:[Object(f.jsx)(d.a.Item,{onClick:function(){return s(!0)},className:"pe-3",children:Object(f.jsx)(d.a.Link,{children:Object(f.jsx)(ot,{icon:m.k})})}),Object(f.jsx)(i,{})]})})]}),Object(f.jsxs)(o.a,{id:"topnav-search",className:"py-1 "+(c?"":"d-none"),children:[Object(f.jsx)(j.a,{xs:1,className:"px-2",children:Object(f.jsx)("div",{onClick:function(){return s(!1)},style:{cursor:"pointer"},children:Object(f.jsx)(ot,{icon:m.p})})}),Object(f.jsx)(j.a,{xs:11,className:"px-2",children:l})]})]})]})},dt=function(){var e={"/categories/:categoryName/create/":at,"/cards/:cardId/edit/":at,"/signup/":Ue,"/login/":_e,"/cards/:cardId/":Te};return Object(f.jsxs)("div",{className:"sdark-bg",children:[Object(f.jsx)(jt,{}),Object(f.jsxs)(O.c,{children:[Object(f.jsx)(O.a,{exact:!0,path:"/categories/:categoryName/",children:Object(f.jsx)(he,{})}),Object(f.jsx)(O.a,{exact:!0,path:"/users/:userId/",children:Object(f.jsx)(pe,{})}),Object(f.jsx)(O.a,{exact:!0,path:"/search/",children:Object(f.jsx)(Je,{})}),Object(f.jsx)(O.a,{exact:!0,path:"/profile/",children:Object(f.jsx)(pe,{})}),Object(f.jsx)(O.a,{exact:!0,path:"/",component:xe}),Object.entries(e).map((function(e){var t=Object(a.a)(e,2),c=t[0],n=t[1];return Object(f.jsx)(O.a,{exact:!0,path:c,children:Object(f.jsx)("div",{className:"py-2",children:Object(f.jsx)(o.a,{children:Object(f.jsx)(n,{})})})})})),Object(f.jsx)(O.a,{children:Object(f.jsx)("h2",{className:"text-sdark-red text-center",children:"Page Not Found."})})]})]})};i.a.render(Object(f.jsx)(x.a,{children:Object(f.jsx)(U,{children:Object(f.jsx)(dt,{})})}),document.getElementById("root"))}},[[270,1,2]]]);
//# sourceMappingURL=main.03f201df.chunk.js.map